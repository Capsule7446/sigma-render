(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();var w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function je(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ut={exports:{}},ve=typeof Reflect=="object"?Reflect:null,Tt=ve&&typeof ve.apply=="function"?ve.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)},Ie;ve&&typeof ve.ownKeys=="function"?Ie=ve.ownKeys:Object.getOwnPropertySymbols?Ie=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Ie=function(t){return Object.getOwnPropertyNames(t)};function ci(i){console&&console.warn&&console.warn(i)}var rr=Number.isNaN||function(t){return t!==t};function R(){R.init.call(this)}ut.exports=R;ut.exports.once=gi;R.EventEmitter=R;R.prototype._events=void 0;R.prototype._eventsCount=0;R.prototype._maxListeners=void 0;var Rt=10;function Be(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(R,"defaultMaxListeners",{enumerable:!0,get:function(){return Rt},set:function(i){if(typeof i!="number"||i<0||rr(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");Rt=i}});R.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};R.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||rr(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function ir(i){return i._maxListeners===void 0?R.defaultMaxListeners:i._maxListeners}R.prototype.getMaxListeners=function(){return ir(this)};R.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n=t==="error",o=this._events;if(o!==void 0)n=n&&o.error===void 0;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var d=o[t];if(d===void 0)return!1;if(typeof d=="function")Tt(d,this,e);else for(var u=d.length,h=ur(d,u),r=0;r<u;++r)Tt(h[r],this,e);return!0};function nr(i,t,e,r){var n,o,a;if(Be(e),o=i._events,o===void 0?(o=i._events=Object.create(null),i._eventsCount=0):(o.newListener!==void 0&&(i.emit("newListener",t,e.listener?e.listener:e),o=i._events),a=o[t]),a===void 0)a=o[t]=e,++i._eventsCount;else if(typeof a=="function"?a=o[t]=r?[e,a]:[a,e]:r?a.unshift(e):a.push(e),n=ir(i),n>0&&a.length>n&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=i,s.type=t,s.count=a.length,ci(s)}return i}R.prototype.addListener=function(t,e){return nr(this,t,e,!1)};R.prototype.on=R.prototype.addListener;R.prototype.prependListener=function(t,e){return nr(this,t,e,!0)};function li(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function or(i,t,e){var r={fired:!1,wrapFn:void 0,target:i,type:t,listener:e},n=li.bind(r);return n.listener=e,r.wrapFn=n,n}R.prototype.once=function(t,e){return Be(e),this.on(t,or(this,t,e)),this};R.prototype.prependOnceListener=function(t,e){return Be(e),this.prependListener(t,or(this,t,e)),this};R.prototype.removeListener=function(t,e){var r,n,o,a,s;if(Be(e),n=this._events,n===void 0)return this;if(r=n[t],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if(typeof r!="function"){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){s=r[a].listener,o=a;break}if(o<0)return this;o===0?r.shift():fi(r,o),r.length===1&&(n[t]=r[0]),n.removeListener!==void 0&&this.emit("removeListener",t,s||e)}return this};R.prototype.off=R.prototype.removeListener;R.prototype.removeAllListeners=function(t){var e,r,n;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var o=Object.keys(r),a;for(n=0;n<o.length;++n)a=o[n],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this};function ar(i,t,e){var r=i._events;if(r===void 0)return[];var n=r[t];return n===void 0?[]:typeof n=="function"?e?[n.listener||n]:[n]:e?pi(n):ur(n,n.length)}R.prototype.listeners=function(t){return ar(this,t,!0)};R.prototype.rawListeners=function(t){return ar(this,t,!1)};R.listenerCount=function(i,t){return typeof i.listenerCount=="function"?i.listenerCount(t):sr.call(i,t)};R.prototype.listenerCount=sr;function sr(i){var t=this._events;if(t!==void 0){var e=t[i];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}R.prototype.eventNames=function(){return this._eventsCount>0?Ie(this._events):[]};function ur(i,t){for(var e=new Array(t),r=0;r<t;++r)e[r]=i[r];return e}function fi(i,t){for(;t+1<i.length;t++)i[t]=i[t+1];i.pop()}function pi(i){for(var t=new Array(i.length),e=0;e<t.length;++e)t[e]=i[e].listener||i[e];return t}function gi(i,t){return new Promise(function(e,r){function n(a){i.removeListener(t,o),r(a)}function o(){typeof i.removeListener=="function"&&i.removeListener("error",n),e([].slice.call(arguments))}dr(i,t,o,{once:!0}),t!=="error"&&yi(i,n,{once:!0})})}function yi(i,t,e){typeof i.on=="function"&&dr(i,"error",t,e)}function dr(i,t,e,r){if(typeof i.on=="function")r.once?i.once(t,e):i.on(t,e);else if(typeof i.addEventListener=="function")i.addEventListener(t,function n(o){r.once&&i.removeEventListener(t,n),e(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var hr=ut.exports;function ne(i){if(typeof i!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=i}typeof Symbol<"u"&&(ne.prototype[Symbol.iterator]=function(){return this});ne.of=function(){var i=arguments,t=i.length,e=0;return new ne(function(){return e>=t?{done:!0}:{done:!1,value:i[e++]}})};ne.empty=function(){var i=new ne(function(){return{done:!0}});return i};ne.fromSequence=function(i){var t=0,e=i.length;return new ne(function(){return t>=e?{done:!0}:{done:!1,value:i[t++]}})};ne.is=function(i){return i instanceof ne?!0:typeof i=="object"&&i!==null&&typeof i.next=="function"};var dt=ne;const X=je(dt);var ht={};ht.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";ht.SYMBOL_SUPPORT=typeof Symbol<"u";var vi=dt,cr=ht,mi=cr.ARRAY_BUFFER_SUPPORT,_i=cr.SYMBOL_SUPPORT;function wi(i){return typeof i=="string"||Array.isArray(i)||mi&&ArrayBuffer.isView(i)?vi.fromSequence(i):typeof i!="object"||i===null?null:_i&&typeof i[Symbol.iterator]=="function"?i[Symbol.iterator]():typeof i.next=="function"?i:null}var lr=function(t){var e=wi(t);if(!e)throw new Error("obliterator: target is not iterable nor a valid iterator.");return e},bi=lr,Ei=function(t,e){for(var r=arguments.length>1?e:1/0,n=r!==1/0?new Array(r):[],o,a=0,s=bi(t);;){if(a===r)return n;if(o=s.next(),o.done)return a!==e&&(n.length=a),n;n[a++]=o.value}};const ct=je(Ei);var xi=dt,Si=lr,Ai=function(){var t=arguments,e=null,r=-1;return new xi(function(){var o=null;do{if(e===null){if(r++,r>=t.length)return{done:!0};e=Si(t[r])}if(o=e.next(),o.done===!0){e=null;continue}break}while(!0);return o})};const de=je(Ai);function Ci(){const i=arguments[0];for(let t=1,e=arguments.length;t<e;t++)if(arguments[t])for(const r in arguments[t])i[r]=arguments[t][r];return i}let P=Ci;typeof Object.assign=="function"&&(P=Object.assign);function oe(i,t,e,r){const n=i._nodes.get(t);let o=null;return n&&(r==="mixed"?o=n.out&&n.out[e]||n.undirected&&n.undirected[e]:r==="directed"?o=n.out&&n.out[e]:o=n.undirected&&n.undirected[e]),o}function Li(i){return i!==null&&typeof i=="object"&&typeof i.addUndirectedEdgeWithKey=="function"&&typeof i.dropNode=="function"}function $(i){return typeof i=="object"&&i!==null&&i.constructor===Object}function fr(i){let t;for(t in i)return!1;return!0}function Y(i,t,e){Object.defineProperty(i,t,{enumerable:!1,configurable:!1,writable:!0,value:e})}function K(i,t,e){const r={enumerable:!0,configurable:!0};typeof e=="function"?r.get=e:(r.value=e,r.writable=!1),Object.defineProperty(i,t,r)}function Gt(i){return!(!$(i)||i.attributes&&!Array.isArray(i.attributes))}function Ti(){let i=Math.floor(Math.random()*256)&255;return()=>i++}class lt extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class b extends lt{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,b.prototype.constructor)}}class m extends lt{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,m.prototype.constructor)}}class C extends lt{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,C.prototype.constructor)}}function at(i,t){this.key=i,this.attributes=t,this.clear()}at.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.directedSelfLoops=0,this.undirectedSelfLoops=0,this.in={},this.out={},this.undirected={}};function ft(i,t){this.key=i,this.attributes=t,this.clear()}ft.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};ft.prototype.upgradeToMixed=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}};function pt(i,t){this.key=i,this.attributes=t,this.clear()}pt.prototype.clear=function(){this.undirectedDegree=0,this.undirectedSelfLoops=0,this.undirected={}};pt.prototype.upgradeToMixed=function(){this.inDegree=0,this.outDegree=0,this.directedSelfLoops=0,this.in={},this.out={}};function pr(i,t,e,r,n){this.key=t,this.attributes=n,this.undirected=i,this.source=e,this.target=r}function gr(i,t,e,r,n,o,a){const s=i.multi;let d="out",u="in";t&&(d=u="undirected");let h,c;if(s){if(h=o[d],c=h[n],typeof c>"u"&&(c=new Set,h[n]=c),c.add(e),r===n&&t)return;h=a[u],typeof h[r]>"u"&&(h[r]=c)}else{if(o[d][n]=e,r===n&&t)return;a[u][r]=e}}function Ri(i,t,e){const r=i.multi,{source:n,target:o}=e,a=n.key,s=o.key,d=t?"undirected":"out",u=n[d],h=t?"undirected":"in";if(s in u)if(r){const l=u[s];l.size===1?(delete u[s],delete o[h][a]):l.delete(e)}else delete u[s];if(r)return;const c=o[h];delete c[a]}function Gi(i){const t=i._nodes.values();let e;for(;e=t.next(),e.done!==!0;)e.value.clear()}function Di(i){i._nodes.forEach((t,e)=>{if(t.out)for(const r in t.out){const n=new Set;n.add(t.out[r]),t.out[r]=n,i._nodes.get(r).in[e]=n}if(t.undirected)for(const r in t.undirected){if(r>e)continue;const n=new Set;n.add(t.undirected[r]),t.undirected[r]=n,i._nodes.get(r).undirected[e]=n}})}const yr=0,vr=1,Ni=2,mr=3;function he(i,t,e,r,n,o,a){let s,d,u,h;if(r=""+r,e===yr){if(s=i._nodes.get(r),!s)throw new m(`Graph.${t}: could not find the "${r}" node in the graph.`);u=n,h=o}else if(e===mr){if(n=""+n,d=i._edges.get(n),!d)throw new m(`Graph.${t}: could not find the "${n}" edge in the graph.`);const c=d.source.key,l=d.target.key;if(r===c)s=d.target;else if(r===l)s=d.source;else throw new m(`Graph.${t}: the "${r}" node is not attached to the "${n}" edge (${c}, ${l}).`);u=o,h=a}else{if(d=i._edges.get(r),!d)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);e===vr?s=d.source:s=d.target,u=n,h=o}return[s,u,h]}function Fi(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=he(this,t,e,r,n,o);return a.attributes[s]}}function Oi(i,t,e){i.prototype[t]=function(r,n){const[o]=he(this,t,e,r,n);return o.attributes}}function Mi(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=he(this,t,e,r,n,o);return a.attributes.hasOwnProperty(s)}}function Pi(i,t,e){i.prototype[t]=function(r,n,o,a){const[s,d,u]=he(this,t,e,r,n,o,a);return s.attributes[d]=u,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:d}),this}}function $i(i,t,e){i.prototype[t]=function(r,n,o,a){const[s,d,u]=he(this,t,e,r,n,o,a);if(typeof u!="function")throw new b(`Graph.${t}: updater should be a function.`);const h=s.attributes,c=u(h[d]);return h[d]=c,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:d}),this}}function ki(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=he(this,t,e,r,n,o);return delete a.attributes[s],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:s}),this}}function Ii(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=he(this,t,e,r,n,o);if(!$(s))throw new b(`Graph.${t}: provided attributes are not a plain object.`);return a.attributes=s,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function zi(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=he(this,t,e,r,n,o);if(!$(s))throw new b(`Graph.${t}: provided attributes are not a plain object.`);return P(a.attributes,s),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:s}),this}}function Ui(i,t,e){i.prototype[t]=function(r,n,o){const[a,s]=he(this,t,e,r,n,o);if(typeof s!="function")throw new b(`Graph.${t}: provided updater is not a function.`);return a.attributes=s(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const ji=[{name:i=>`get${i}Attribute`,attacher:Fi},{name:i=>`get${i}Attributes`,attacher:Oi},{name:i=>`has${i}Attribute`,attacher:Mi},{name:i=>`set${i}Attribute`,attacher:Pi},{name:i=>`update${i}Attribute`,attacher:$i},{name:i=>`remove${i}Attribute`,attacher:ki},{name:i=>`replace${i}Attributes`,attacher:Ii},{name:i=>`merge${i}Attributes`,attacher:zi},{name:i=>`update${i}Attributes`,attacher:Ui}];function Bi(i){ji.forEach(function({name:t,attacher:e}){e(i,t("Node"),yr),e(i,t("Source"),vr),e(i,t("Target"),Ni),e(i,t("Opposite"),mr)})}function Hi(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new C(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new C(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=oe(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);if(e!=="mixed"&&o.undirected!==(e==="undirected"))throw new m(`Graph.${t}: could not find the "${r}" ${e} edge in the graph.`);return o.attributes[n]}}function Wi(i,t,e){i.prototype[t]=function(r){let n;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new C(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new C(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+arguments[1];if(n=oe(this,o,a,e),!n)throw new m(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else if(r=""+r,n=this._edges.get(r),!n)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);if(e!=="mixed"&&n.undirected!==(e==="undirected"))throw new m(`Graph.${t}: could not find the "${r}" ${e} edge in the graph.`);return n.attributes}}function Vi(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new C(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new C(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=oe(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);if(e!=="mixed"&&o.undirected!==(e==="undirected"))throw new m(`Graph.${t}: could not find the "${r}" ${e} edge in the graph.`);return o.attributes.hasOwnProperty(n)}}function qi(i,t,e){i.prototype[t]=function(r,n,o){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new C(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new C(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,d=""+n;if(n=arguments[2],o=arguments[3],a=oe(this,s,d,e),!a)throw new m(`Graph.${t}: could not find an edge for the given path ("${s}" - "${d}").`)}else if(r=""+r,a=this._edges.get(r),!a)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);if(e!=="mixed"&&a.undirected!==(e==="undirected"))throw new m(`Graph.${t}: could not find the "${r}" ${e} edge in the graph.`);return a.attributes[n]=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:n}),this}}function Yi(i,t,e){i.prototype[t]=function(r,n,o){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new C(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new C(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,d=""+n;if(n=arguments[2],o=arguments[3],a=oe(this,s,d,e),!a)throw new m(`Graph.${t}: could not find an edge for the given path ("${s}" - "${d}").`)}else if(r=""+r,a=this._edges.get(r),!a)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);if(typeof o!="function")throw new b(`Graph.${t}: updater should be a function.`);if(e!=="mixed"&&a.undirected!==(e==="undirected"))throw new m(`Graph.${t}: could not find the "${r}" ${e} edge in the graph.`);return a.attributes[n]=o(a.attributes[n]),this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:n}),this}}function Ki(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new C(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new C(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=oe(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);if(e!=="mixed"&&o.undirected!==(e==="undirected"))throw new m(`Graph.${t}: could not find the "${r}" ${e} edge in the graph.`);return delete o.attributes[n],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:n}),this}}function Xi(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new C(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new C(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=oe(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);if(!$(n))throw new b(`Graph.${t}: provided attributes are not a plain object.`);if(e!=="mixed"&&o.undirected!==(e==="undirected"))throw new m(`Graph.${t}: could not find the "${r}" ${e} edge in the graph.`);return o.attributes=n,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Qi(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new C(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new C(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=oe(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);if(!$(n))throw new b(`Graph.${t}: provided attributes are not a plain object.`);if(e!=="mixed"&&o.undirected!==(e==="undirected"))throw new m(`Graph.${t}: could not find the "${r}" ${e} edge in the graph.`);return P(o.attributes,n),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:n}),this}}function Zi(i,t,e){i.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new C(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new C(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,s=""+n;if(n=arguments[2],o=oe(this,a,s,e),!o)throw new m(`Graph.${t}: could not find an edge for the given path ("${a}" - "${s}").`)}else if(r=""+r,o=this._edges.get(r),!o)throw new m(`Graph.${t}: could not find the "${r}" edge in the graph.`);if(typeof n!="function")throw new b(`Graph.${t}: provided updater is not a function.`);if(e!=="mixed"&&o.undirected!==(e==="undirected"))throw new m(`Graph.${t}: could not find the "${r}" ${e} edge in the graph.`);return o.attributes=n(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Ji=[{name:i=>`get${i}Attribute`,attacher:Hi},{name:i=>`get${i}Attributes`,attacher:Wi},{name:i=>`has${i}Attribute`,attacher:Vi},{name:i=>`set${i}Attribute`,attacher:qi},{name:i=>`update${i}Attribute`,attacher:Yi},{name:i=>`remove${i}Attribute`,attacher:Ki},{name:i=>`replace${i}Attributes`,attacher:Xi},{name:i=>`merge${i}Attributes`,attacher:Qi},{name:i=>`update${i}Attributes`,attacher:Zi}];function en(i){Ji.forEach(function({name:t,attacher:e}){e(i,t("Edge"),"mixed"),e(i,t("DirectedEdge"),"directed"),e(i,t("UndirectedEdge"),"undirected")})}const tn=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function rn(i,t){for(const e in t)i.push(t[e].key)}function nn(i,t){for(const e in t)t[e].forEach(r=>i.push(r.key))}function on(i,t,e){for(const r in i){if(r===e)continue;const n=i[r];t(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected)}}function an(i,t,e){for(const r in i)r!==e&&i[r].forEach(n=>t(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected))}function sn(i,t,e){let r=!1;for(const n in i){if(n===e)continue;const o=i[n];if(r=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),r)return o.key}}function un(i,t,e){let r,n,o,a,s,d=!1;for(const u in i)if(u!==e){for(r=i[u].values();n=r.next(),n.done!==!0;)if(o=n.value,a=o.source,s=o.target,d=t(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected),d)return o.key}}function Qe(i,t){const e=Object.keys(i),r=e.length;let n=null,o=0;return new X(function a(){let s;if(n){const d=n.next();if(d.done)return n=null,o++,a();s=d.value}else{if(o>=r)return{done:!0};const d=e[o];if(d===t)return o++,a();if(s=i[d],s instanceof Set)return n=s.values(),a();o++}return{done:!1,value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected}}})}function dn(i,t,e){const r=t[e];r&&i.push(r.key)}function hn(i,t,e){const r=t[e];r&&r.forEach(n=>i.push(n.key))}function cn(i,t,e){const r=i[t];if(!r)return;const n=r.source,o=r.target;e(r.key,r.attributes,n.key,o.key,n.attributes,o.attributes,r.undirected)}function ln(i,t,e){const r=i[t];r&&r.forEach(n=>e(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected))}function fn(i,t,e){const r=i[t];if(!r)return;const n=r.source,o=r.target;if(e(r.key,r.attributes,n.key,o.key,n.attributes,o.attributes,r.undirected))return r.key}function pn(i,t,e){const r=i[t];if(!r)return;let n=!1;const o=r.values();let a,s;for(;a=o.next(),a.done!==!0;)if(s=a.value,n=e(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),n)return s.key}function Ze(i,t){const e=i[t];if(e instanceof Set){const r=e.values();return new X(function(){const n=r.next();if(n.done)return n;const o=n.value;return{done:!1,value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected}}})}return X.of([e.key,e.attributes,e.source.key,e.target.key,e.source.attributes,e.target.attributes])}function gn(i,t){if(i.size===0)return[];if(t==="mixed"||t===i.type)return typeof Array.from=="function"?Array.from(i._edges.keys()):ct(i._edges.keys(),i._edges.size);const e=t==="undirected"?i.undirectedSize:i.directedSize,r=new Array(e),n=t==="undirected",o=i._edges.values();let a=0,s,d;for(;s=o.next(),s.done!==!0;)d=s.value,d.undirected===n&&(r[a++]=d.key);return r}function yn(i,t,e){if(i.size===0)return;const r=t!=="mixed"&&t!==i.type,n=t==="undirected";let o,a;const s=i._edges.values();for(;o=s.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==n)continue;const{key:d,attributes:u,source:h,target:c}=a;e(d,u,h.key,c.key,h.attributes,c.attributes,a.undirected)}}function vn(i,t,e){if(i.size===0)return;const r=t!=="mixed"&&t!==i.type,n=t==="undirected";let o,a,s=!1;const d=i._edges.values();for(;o=d.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==n)continue;const{key:u,attributes:h,source:c,target:l}=a;if(s=e(u,h,c.key,l.key,c.attributes,l.attributes,a.undirected),s)return u}}function mn(i,t){if(i.size===0)return X.empty();const e=t!=="mixed"&&t!==i.type,r=t==="undirected",n=i._edges.values();return new X(function(){let a,s;for(;;){if(a=n.next(),a.done)return a;if(s=a.value,!(e&&s.undirected!==r))break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}})}function _n(i,t,e,r){const n=[],o=i?nn:rn;return t!=="undirected"&&(e!=="out"&&o(n,r.in),e!=="in"&&o(n,r.out),!e&&r.directedSelfLoops>0&&n.splice(n.lastIndexOf(r.key),1)),t!=="directed"&&o(n,r.undirected),n}function wn(i,t,e,r,n){const o=i?an:on;t!=="undirected"&&(e!=="out"&&o(r.in,n),e!=="in"&&o(r.out,n,e?null:r.key)),t!=="directed"&&o(r.undirected,n)}function bn(i,t,e,r,n){const o=i?un:sn;let a;if(t!=="undirected"&&(e!=="out"&&(a=o(r.in,n),a)||e!=="in"&&(a=o(r.out,n,e?null:r.key),a))||t!=="directed"&&(a=o(r.undirected,n),a))return a}function En(i,t,e){let r=X.empty();return i!=="undirected"&&(t!=="out"&&typeof e.in<"u"&&(r=de(r,Qe(e.in))),t!=="in"&&typeof e.out<"u"&&(r=de(r,Qe(e.out,t?null:e.key)))),i!=="directed"&&typeof e.undirected<"u"&&(r=de(r,Qe(e.undirected))),r}function xn(i,t,e,r,n){const o=t?hn:dn,a=[];return i!=="undirected"&&(typeof r.in<"u"&&e!=="out"&&o(a,r.in,n),typeof r.out<"u"&&e!=="in"&&o(a,r.out,n),!e&&r.directedSelfLoops>0&&a.splice(a.lastIndexOf(r.key),1)),i!=="directed"&&typeof r.undirected<"u"&&o(a,r.undirected,n),a}function Sn(i,t,e,r,n,o){const a=t?ln:cn;i!=="undirected"&&(typeof r.in<"u"&&e!=="out"&&a(r.in,n,o),r.key!==n&&typeof r.out<"u"&&e!=="in"&&a(r.out,n,o)),i!=="directed"&&typeof r.undirected<"u"&&a(r.undirected,n,o)}function An(i,t,e,r,n,o){const a=t?pn:fn;let s;if(i!=="undirected"&&(typeof r.in<"u"&&e!=="out"&&(s=a(r.in,n,o),s)||r.key!==n&&typeof r.out<"u"&&e!=="in"&&(s=a(r.out,n,o,e?null:r.key),s))||i!=="directed"&&typeof r.undirected<"u"&&(s=a(r.undirected,n,o),s))return s}function Cn(i,t,e,r){let n=X.empty();return i!=="undirected"&&(typeof e.in<"u"&&t!=="out"&&r in e.in&&(n=de(n,Ze(e.in,r))),typeof e.out<"u"&&t!=="in"&&r in e.out&&(n=de(n,Ze(e.out,r)))),i!=="directed"&&typeof e.undirected<"u"&&r in e.undirected&&(n=de(n,Ze(e.undirected,r))),n}function Ln(i,t){const{name:e,type:r,direction:n}=t;i.prototype[e]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return gn(this,r);if(arguments.length===1){o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new m(`Graph.${e}: could not find the "${o}" node in the graph.`);return _n(this.multi,r==="mixed"?this.type:r,n,s)}if(arguments.length===2){o=""+o,a=""+a;const s=this._nodes.get(o);if(!s)throw new m(`Graph.${e}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new m(`Graph.${e}:  could not find the "${a}" target node in the graph.`);return xn(r,this.multi,n,s,a)}throw new b(`Graph.${e}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Tn(i,t){const{name:e,type:r,direction:n}=t,o="forEach"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[o]=function(u,h,c){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return c=u,yn(this,r,c);if(arguments.length===2){u=""+u,c=h;const l=this._nodes.get(u);if(typeof l>"u")throw new m(`Graph.${o}: could not find the "${u}" node in the graph.`);return wn(this.multi,r==="mixed"?this.type:r,n,l,c)}if(arguments.length===3){u=""+u,h=""+h;const l=this._nodes.get(u);if(!l)throw new m(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(h))throw new m(`Graph.${o}:  could not find the "${h}" target node in the graph.`);return Sn(r,this.multi,n,l,h,c)}throw new b(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const a="map"+e[0].toUpperCase()+e.slice(1);i.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop();let c;if(u.length===0){let l=0;r!=="directed"&&(l+=this.undirectedSize),r!=="undirected"&&(l+=this.directedSize),c=new Array(l);let f=0;u.push((g,v,y,_,p,x,E)=>{c[f++]=h(g,v,y,_,p,x,E)})}else c=[],u.push((l,f,g,v,y,_,p)=>{c.push(h(l,f,g,v,y,_,p))});return this[o].apply(this,u),c};const s="filter"+e[0].toUpperCase()+e.slice(1);i.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),h=u.pop(),c=[];return u.push((l,f,g,v,y,_,p)=>{h(l,f,g,v,y,_,p)&&c.push(l)}),this[o].apply(this,u),c};const d="reduce"+e[0].toUpperCase()+e.slice(1);i.prototype[d]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new b(`Graph.${d}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new b(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h,c;u.length===2?(h=u[0],c=u[1],u=[]):u.length===3?(h=u[1],c=u[2],u=[u[0]]):u.length===4&&(h=u[2],c=u[3],u=[u[0],u[1]]);let l=c;return u.push((f,g,v,y,_,p,x)=>{l=h(l,f,g,v,y,_,p,x)}),this[o].apply(this,u),l}}function Rn(i,t){const{name:e,type:r,direction:n}=t,o="find"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[o]=function(d,u,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return h=d,vn(this,r,h);if(arguments.length===2){d=""+d,h=u;const c=this._nodes.get(d);if(typeof c>"u")throw new m(`Graph.${o}: could not find the "${d}" node in the graph.`);return bn(this.multi,r==="mixed"?this.type:r,n,c,h)}if(arguments.length===3){d=""+d,u=""+u;const c=this._nodes.get(d);if(!c)throw new m(`Graph.${o}:  could not find the "${d}" source node in the graph.`);if(!this._nodes.has(u))throw new m(`Graph.${o}:  could not find the "${u}" target node in the graph.`);return An(r,this.multi,n,c,u,h)}throw new b(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const a="some"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[a]=function(){const d=Array.prototype.slice.call(arguments),u=d.pop();return d.push((c,l,f,g,v,y,_)=>u(c,l,f,g,v,y,_)),!!this[o].apply(this,d)};const s="every"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[s]=function(){const d=Array.prototype.slice.call(arguments),u=d.pop();return d.push((c,l,f,g,v,y,_)=>!u(c,l,f,g,v,y,_)),!this[o].apply(this,d)}}function Gn(i,t){const{name:e,type:r,direction:n}=t,o=e.slice(0,-1)+"Entries";i.prototype[o]=function(a,s){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return X.empty();if(!arguments.length)return mn(this,r);if(arguments.length===1){a=""+a;const d=this._nodes.get(a);if(!d)throw new m(`Graph.${o}: could not find the "${a}" node in the graph.`);return En(r,n,d)}if(arguments.length===2){a=""+a,s=""+s;const d=this._nodes.get(a);if(!d)throw new m(`Graph.${o}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(s))throw new m(`Graph.${o}:  could not find the "${s}" target node in the graph.`);return Cn(r,n,d,s)}throw new b(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Dn(i){tn.forEach(t=>{Ln(i,t),Tn(i,t),Rn(i,t),Gn(i,t)})}const Nn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Je(i,t){if(!(typeof t>"u"))for(const e in t)i.add(e)}function Fn(i,t,e){if(i!=="mixed"){if(i==="undirected")return Object.keys(e.undirected);if(typeof t=="string")return Object.keys(e[t])}const r=new Set;return i!=="undirected"&&(t!=="out"&&Je(r,e.in),t!=="in"&&Je(r,e.out)),i!=="directed"&&Je(r,e.undirected),ct(r.values(),r.size)}function Dt(i,t,e){for(const r in t){let n=t[r];n instanceof Set&&(n=n.values().next().value);const o=n.source,a=n.target,s=o===i?a:o;e(s.key,s.attributes)}}function et(i,t,e,r){for(const n in e){let o=e[n];o instanceof Set&&(o=o.values().next().value);const a=o.source,s=o.target,d=a===t?s:a;i.has(d.key)||(i.add(d.key),r(d.key,d.attributes))}}function Nt(i,t,e){for(const r in t){let n=t[r];n instanceof Set&&(n=n.values().next().value);const o=n.source,a=n.target,s=o===i?a:o;if(e(s.key,s.attributes))return s.key}}function tt(i,t,e,r){for(const n in e){let o=e[n];o instanceof Set&&(o=o.values().next().value);const a=o.source,s=o.target,d=a===t?s:a;if(i.has(d.key))continue;if(i.add(d.key),r(d.key,d.attributes))return d.key}}function On(i,t,e,r){if(i!=="mixed"){if(i==="undirected")return Dt(e,e.undirected,r);if(typeof t=="string")return Dt(e,e[t],r)}const n=new Set;i!=="undirected"&&(t!=="out"&&et(n,e,e.in,r),t!=="in"&&et(n,e,e.out,r)),i!=="directed"&&et(n,e,e.undirected,r)}function Mn(i,t,e,r){if(i!=="mixed"){if(i==="undirected")return Nt(e,e.undirected,r);if(typeof t=="string")return Nt(e,e[t],r)}const n=new Set;let o;if(i!=="undirected"&&(t!=="out"&&(o=tt(n,e,e.in,r),o)||t!=="in"&&(o=tt(n,e,e.out,r),o))||i!=="directed"&&(o=tt(n,e,e.undirected,r),o))return o}function Ft(i,t){const e=Object.keys(t),r=e.length;let n=0;return new X(function(){if(n>=r)return{done:!0};let o=t[e[n++]];o instanceof Set&&(o=o.values().next().value);const a=o.source,s=o.target,d=a===i?s:a;return{done:!1,value:{neighbor:d.key,attributes:d.attributes}}})}function rt(i,t,e){const r=Object.keys(e),n=r.length;let o=0;return new X(function a(){if(o>=n)return{done:!0};let s=e[r[o++]];s instanceof Set&&(s=s.values().next().value);const d=s.source,u=s.target,h=d===t?u:d;return i.has(h.key)?a():(i.add(h.key),{done:!1,value:{neighbor:h.key,attributes:h.attributes}})})}function Pn(i,t,e){if(i!=="mixed"){if(i==="undirected")return Ft(e,e.undirected);if(typeof t=="string")return Ft(e,e[t])}let r=X.empty();const n=new Set;return i!=="undirected"&&(t!=="out"&&(r=de(r,rt(n,e,e.in))),t!=="in"&&(r=de(r,rt(n,e,e.out)))),i!=="directed"&&(r=de(r,rt(n,e,e.undirected))),r}function $n(i,t){const{name:e,type:r,direction:n}=t;i.prototype[e]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new m(`Graph.${e}: could not find the "${o}" node in the graph.`);return Fn(r==="mixed"?this.type:r,n,a)}}function kn(i,t){const{name:e,type:r,direction:n}=t,o="forEach"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[o]=function(u,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const c=this._nodes.get(u);if(typeof c>"u")throw new m(`Graph.${o}: could not find the "${u}" node in the graph.`);On(r==="mixed"?this.type:r,n,c,h)};const a="map"+e[0].toUpperCase()+e.slice(1);i.prototype[a]=function(u,h){const c=[];return this[o](u,(l,f)=>{c.push(h(l,f))}),c};const s="filter"+e[0].toUpperCase()+e.slice(1);i.prototype[s]=function(u,h){const c=[];return this[o](u,(l,f)=>{h(l,f)&&c.push(l)}),c};const d="reduce"+e[0].toUpperCase()+e.slice(1);i.prototype[d]=function(u,h,c){if(arguments.length<3)throw new b(`Graph.${d}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let l=c;return this[o](u,(f,g)=>{l=h(l,f,g)}),l}}function In(i,t){const{name:e,type:r,direction:n}=t,o=e[0].toUpperCase()+e.slice(1,-1),a="find"+o;i.prototype[a]=function(u,h){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;u=""+u;const c=this._nodes.get(u);if(typeof c>"u")throw new m(`Graph.${a}: could not find the "${u}" node in the graph.`);return Mn(r==="mixed"?this.type:r,n,c,h)};const s="some"+o;i.prototype[s]=function(u,h){return!!this[a](u,h)};const d="every"+o;i.prototype[d]=function(u,h){return!this[a](u,(l,f)=>!h(l,f))}}function zn(i,t){const{name:e,type:r,direction:n}=t,o=e.slice(0,-1)+"Entries";i.prototype[o]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return X.empty();a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new m(`Graph.${o}: could not find the "${a}" node in the graph.`);return Pn(r==="mixed"?this.type:r,n,s)}}function Un(i){Nn.forEach(t=>{$n(i,t),kn(i,t),In(i,t),zn(i,t)})}function Ne(i,t,e,r,n){const o=r._nodes.values(),a=r.type;let s,d,u,h,c,l,f;for(;s=o.next(),s.done!==!0;){let g=!1;if(d=s.value,a!=="undirected"){h=d.out;for(u in h)if(c=h[u],l=c.target,g=!0,f=n(d.key,l.key,d.attributes,l.attributes,c.key,c.attributes,c.undirected),i&&f)return c}if(a!=="directed"){h=d.undirected;for(u in h)if(!(t&&d.key>u)&&(c=h[u],l=c.target,l.key!==u&&(l=c.source),g=!0,f=n(d.key,l.key,d.attributes,l.attributes,c.key,c.attributes,c.undirected),i&&f))return c}if(e&&!g&&(f=n(d.key,null,d.attributes,null,null,null,null),i&&f))return null}}function Fe(i,t,e,r,n){const o=r._nodes.values(),a=r.type;let s,d,u,h,c,l,f,g,v;for(;s=o.next(),s.done!==!0;){let y=!1;if(d=s.value,a!=="undirected"){l=d.out;for(u in l)for(h=l[u].values();c=h.next(),c.done!==!0;)if(f=c.value,g=f.target,y=!0,v=n(d.key,g.key,d.attributes,g.attributes,f.key,f.attributes,f.undirected),i&&v)return f}if(a!=="directed"){l=d.undirected;for(u in l)if(!(t&&d.key>u)){for(h=l[u].values();c=h.next(),c.done!==!0;)if(f=c.value,g=f.target,g.key!==u&&(g=f.source),y=!0,v=n(d.key,g.key,d.attributes,g.attributes,f.key,f.attributes,f.undirected),i&&v)return f}}if(e&&!y&&(v=n(d.key,null,d.attributes,null,null,null,null),i&&v))return null}}function Ot(i,t){const e={key:i};return fr(t.attributes)||(e.attributes=P({},t.attributes)),e}function Mt(i,t){const e={key:i,source:t.source.key,target:t.target.key};return fr(t.attributes)||(e.attributes=P({},t.attributes)),t.undirected&&(e.undirected=!0),e}function jn(i){return $(i)?"key"in i?"attributes"in i&&(!$(i.attributes)||i.attributes===null)?"invalid-attributes":null:"no-key":"not-object"}function Bn(i){return $(i)?"source"in i?"target"in i?"attributes"in i&&(!$(i.attributes)||i.attributes===null)?"invalid-attributes":"undirected"in i&&typeof i.undirected!="boolean"?"invalid-undirected":null:"no-target":"no-source":"not-object"}const Hn=Ti(),Wn=new Set(["directed","undirected","mixed"]),Pt=new Set(["domain","_events","_eventsCount","_maxListeners"]),Vn=[{name:i=>`${i}Edge`,generateKey:!0},{name:i=>`${i}DirectedEdge`,generateKey:!0,type:"directed"},{name:i=>`${i}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:i=>`${i}EdgeWithKey`},{name:i=>`${i}DirectedEdgeWithKey`,type:"directed"},{name:i=>`${i}UndirectedEdgeWithKey`,type:"undirected"}],qn={allowSelfLoops:!0,multi:!1,type:"mixed"};function Yn(i,t,e){if(e&&!$(e))throw new b(`Graph.addNode: invalid attributes. Expecting an object but got "${e}"`);if(t=""+t,e=e||{},i._nodes.has(t))throw new C(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new i.NodeDataClass(t,e);return i._nodes.set(t,r),i.emit("nodeAdded",{key:t,attributes:e}),r}function $t(i,t,e){const r=new i.NodeDataClass(t,e);return i._nodes.set(t,r),i.emit("nodeAdded",{key:t,attributes:e}),r}function _r(i,t,e,r,n,o,a,s){if(!r&&i.type==="undirected")throw new C(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&i.type==="directed")throw new C(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!$(s))throw new b(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`);if(o=""+o,a=""+a,s=s||{},!i.allowSelfLoops&&o===a)throw new C(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const d=i._nodes.get(o),u=i._nodes.get(a);if(!d)throw new m(`Graph.${t}: source node "${o}" not found.`);if(!u)throw new m(`Graph.${t}: target node "${a}" not found.`);const h={key:null,undirected:r,source:o,target:a,attributes:s};if(e)n=i._edgeKeyGenerator();else if(n=""+n,i._edges.has(n))throw new C(`Graph.${t}: the "${n}" edge already exists in the graph.`);if(!i.multi&&(r?typeof d.undirected[a]<"u":typeof d.out[a]<"u"))throw new C(`Graph.${t}: an edge linking "${o}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const c=new pr(r,n,d,u,s);return i._edges.set(n,c),o===a?r?(d.undirectedSelfLoops++,i._undirectedSelfLoopCount++):(d.directedSelfLoops++,i._directedSelfLoopCount++):r?(d.undirectedDegree++,u.undirectedDegree++):(d.outDegree++,u.inDegree++),gr(i,r,c,o,a,d,u),r?i._undirectedSize++:i._directedSize++,h.key=n,i.emit("edgeAdded",h),n}function Kn(i,t,e,r,n,o,a,s,d){if(!r&&i.type==="undirected")throw new C(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&i.type==="directed")throw new C(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(d){if(typeof s!="function")throw new b(`Graph.${t}: invalid updater function. Expecting a function but got "${s}"`)}else if(!$(s))throw new b(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`)}o=""+o,a=""+a;let u;if(d&&(u=s,s=void 0),!i.allowSelfLoops&&o===a)throw new C(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let h=i._nodes.get(o),c=i._nodes.get(a),l,f;if(!e&&(l=i._edges.get(n),l)){if((l.source.key!==o||l.target.key!==a)&&(!r||l.source.key!==a||l.target.key!==o))throw new C(`Graph.${t}: inconsistency detected when attempting to merge the "${n}" edge with "${o}" source & "${a}" target vs. ("${l.source.key}", "${l.target.key}").`);f=l}if(!f&&!i.multi&&h&&(f=r?h.undirected[a]:h.out[a]),f){const _=[f.key,!1,!1,!1];if(d?!u:!s)return _;if(d){const p=f.attributes;f.attributes=u(p),i.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else P(f.attributes,s),i.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:s});return _}s=s||{},d&&u&&(s=u(s));const g={key:null,undirected:r,source:o,target:a,attributes:s};if(e)n=i._edgeKeyGenerator();else if(n=""+n,i._edges.has(n))throw new C(`Graph.${t}: the "${n}" edge already exists in the graph.`);let v=!1,y=!1;return h||(h=$t(i,o,{}),v=!0,o===a&&(c=h,y=!0)),c||(c=$t(i,a,{}),y=!0),l=new pr(r,n,h,c,s),i._edges.set(n,l),o===a?r?(h.undirectedSelfLoops++,i._undirectedSelfLoopCount++):(h.directedSelfLoops++,i._directedSelfLoopCount++):r?(h.undirectedDegree++,c.undirectedDegree++):(h.outDegree++,c.inDegree++),gr(i,r,l,o,a,h,c),r?i._undirectedSize++:i._directedSize++,g.key=n,i.emit("edgeAdded",g),[n,!0,v,y]}class G extends hr.EventEmitter{constructor(t){if(super(),t=P({},qn,t),typeof t.multi!="boolean")throw new b(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!Wn.has(t.type))throw new b(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new b(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const e=t.type==="mixed"?at:t.type==="directed"?ft:pt;Y(this,"NodeDataClass",e);const r=Hn();let n=0;const o=()=>{let a;do a="geid_"+r+"_"+n++;while(this._edges.has(a));return a};Y(this,"_attributes",{}),Y(this,"_nodes",new Map),Y(this,"_edges",new Map),Y(this,"_directedSize",0),Y(this,"_undirectedSize",0),Y(this,"_directedSelfLoopCount",0),Y(this,"_undirectedSelfLoopCount",0),Y(this,"_edgeKeyGenerator",o),Y(this,"_options",t),Pt.forEach(a=>Y(this,a,this[a])),K(this,"order",()=>this._nodes.size),K(this,"size",()=>this._edges.size),K(this,"directedSize",()=>this._directedSize),K(this,"undirectedSize",()=>this._undirectedSize),K(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),K(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),K(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),K(this,"multi",this._options.multi),K(this,"type",this._options.type),K(this,"allowSelfLoops",this._options.allowSelfLoops),K(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,e){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&!n.undirected}else if(arguments.length===2){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)return!1;const n=r.out[e];return n?this.multi?!!n.size:!0:!1}throw new b(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,e){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&n.undirected}else if(arguments.length===2){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)return!1;const n=r.undirected[e];return n?this.multi?!!n.size:!0:!1}throw new b(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,e){if(arguments.length===1){const r=""+t;return this._edges.has(r)}else if(arguments.length===2){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)return!1;let n=typeof r.out<"u"&&r.out[e];return n||(n=typeof r.undirected<"u"&&r.undirected[e]),n?this.multi?!!n.size:!0:!1}throw new b(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,e){if(this.type==="undirected")return;if(t=""+t,e=""+e,this.multi)throw new C("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(t);if(!r)throw new m(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new m(`Graph.directedEdge: could not find the "${e}" target node in the graph.`);const n=r.out&&r.out[e]||void 0;if(n)return n.key}undirectedEdge(t,e){if(this.type==="directed")return;if(t=""+t,e=""+e,this.multi)throw new C("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(t);if(!r)throw new m(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new m(`Graph.undirectedEdge: could not find the "${e}" target node in the graph.`);const n=r.undirected&&r.undirected[e]||void 0;if(n)return n.key}edge(t,e){if(this.multi)throw new C("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new m(`Graph.edge: could not find the "${e}" target node in the graph.`);const n=r.out&&r.out[e]||r.undirected&&r.undirected[e]||void 0;if(n)return n.key}areDirectedNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in r.in||e in r.out}areOutNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in r.out}areInNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in r.in}areUndirectedNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:e in r.undirected}areNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(e in r.in||e in r.out)||this.type!=="directed"&&e in r.undirected}areInboundNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in r.in||this.type!=="directed"&&e in r.undirected}areOutboundNeighbors(t,e){t=""+t,e=""+e;const r=this._nodes.get(t);if(!r)throw new m(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in r.out||this.type!=="directed"&&e in r.undirected}inDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.directedSelfLoops}outDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree+e.directedSelfLoops}directedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.directedDegree: could not find the "${t}" node in the graph.`);if(this.type==="undirected")return 0;const r=e.directedSelfLoops,n=e.inDegree+r,o=e.outDegree+r;return n+o}undirectedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);if(this.type==="directed")return 0;const r=e.undirectedSelfLoops;return e.undirectedDegree+r*2}degree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.degree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=e.undirectedDegree+e.undirectedSelfLoops*2),this.type!=="undirected"&&(r+=e.inDegree+e.outDegree+e.directedSelfLoops*2),r}inDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree}outDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree}directedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree}undirectedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree}degreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=e.undirectedDegree),this.type!=="undirected"&&(r+=e.inDegree+e.outDegree),r}source(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.source: could not find the "${t}" edge in the graph.`);return e.source.key}target(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.target: could not find the "${t}" edge in the graph.`);return e.target.key}extremities(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[e.source.key,e.target.key]}opposite(t,e){t=""+t,e=""+e;const r=this._edges.get(e);if(!r)throw new m(`Graph.opposite: could not find the "${e}" edge in the graph.`);const n=r.source.key,o=r.target.key;if(t===n)return o;if(t===o)return n;throw new m(`Graph.opposite: the "${t}" node is not attached to the "${e}" edge (${n}, ${o}).`)}hasExtremity(t,e){t=""+t,e=""+e;const r=this._edges.get(t);if(!r)throw new m(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return r.source.key===e||r.target.key===e}isUndirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return e.undirected}isDirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!e.undirected}isSelfLoop(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return e.source===e.target}addNode(t,e){return Yn(this,t,e).key}mergeNode(t,e){if(e&&!$(e))throw new b(`Graph.mergeNode: invalid attributes. Expecting an object but got "${e}"`);t=""+t,e=e||{};let r=this._nodes.get(t);return r?(e&&(P(r.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:r.attributes,data:e})),[t,!1]):(r=new this.NodeDataClass(t,e),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])}updateNode(t,e){if(e&&typeof e!="function")throw new b(`Graph.updateNode: invalid updater function. Expecting a function but got "${e}"`);t=""+t;let r=this._nodes.get(t);if(r){if(e){const o=r.attributes;r.attributes=e(o),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:r.attributes})}return[t,!1]}const n=e?e({}):{};return r=new this.NodeDataClass(t,n),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0]}dropNode(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.dropNode: could not find the "${t}" node in the graph.`);this.forEachEdge(t,r=>{this.dropEdge(r)}),this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:e.attributes})}dropEdge(t){let e;if(arguments.length>1){const s=""+arguments[0],d=""+arguments[1];if(e=oe(this,s,d,this.type),!e)throw new m(`Graph.dropEdge: could not find the "${s}" -> "${d}" edge in the graph.`)}else if(t=""+t,e=this._edges.get(t),!e)throw new m(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);this._edges.delete(e.key);const{source:r,target:n,attributes:o}=e,a=e.undirected;return r===n?a?(r.undirectedSelfLoops--,this._undirectedSelfLoopCount--):(r.directedSelfLoops--,this._directedSelfLoopCount--):a?(r.undirectedDegree--,n.undirectedDegree--):(r.outDegree--,n.inDegree--),Ri(this,a,e),a?this._undirectedSize--:this._directedSize--,this.emit("edgeDropped",{key:t,attributes:o,source:r.key,target:n.key,undirected:a}),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){Gi(this),this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,e){if(typeof e!="function")throw new b("Graph.updateAttribute: updater should be a function.");const r=this._attributes[t];return this._attributes[t]=e(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!$(t))throw new b("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!$(t))throw new b("Graph.mergeAttributes: provided attributes are not a plain object.");return P(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new b("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,e){if(typeof t!="function")throw new b("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!Gt(e))throw new b("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)o=n.value,o.attributes=t(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})}updateEachEdgeAttributes(t,e){if(typeof t!="function")throw new b("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!Gt(e))throw new b("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let n,o,a,s;for(;n=r.next(),n.done!==!0;)o=n.value,a=o.source,s=o.target,o.attributes=t(o.key,o.attributes,a.key,s.key,a.attributes,s.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new b("Graph.forEachAdjacencyEntry: expecting a callback.");this.multi?Fe(!1,!1,!1,this,t):Ne(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new b("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");this.multi?Fe(!1,!1,!0,this,t):Ne(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new b("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");this.multi?Fe(!1,!0,!1,this,t):Ne(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new b("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");this.multi?Fe(!1,!0,!0,this,t):Ne(!1,!0,!0,this,t)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):ct(this._nodes.keys(),this._nodes.size)}forEachNode(t){if(typeof t!="function")throw new b("Graph.forEachNode: expecting a callback.");const e=this._nodes.values();let r,n;for(;r=e.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)}findNode(t){if(typeof t!="function")throw new b("Graph.findNode: expecting a callback.");const e=this._nodes.values();let r,n;for(;r=e.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return n.key}mapNodes(t){if(typeof t!="function")throw new b("Graph.mapNode: expecting a callback.");const e=this._nodes.values();let r,n;const o=new Array(this.order);let a=0;for(;r=e.next(),r.done!==!0;)n=r.value,o[a++]=t(n.key,n.attributes);return o}someNode(t){if(typeof t!="function")throw new b("Graph.someNode: expecting a callback.");const e=this._nodes.values();let r,n;for(;r=e.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new b("Graph.everyNode: expecting a callback.");const e=this._nodes.values();let r,n;for(;r=e.next(),r.done!==!0;)if(n=r.value,!t(n.key,n.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new b("Graph.filterNodes: expecting a callback.");const e=this._nodes.values();let r,n;const o=[];for(;r=e.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)&&o.push(n.key);return o}reduceNodes(t,e){if(typeof t!="function")throw new b("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new b("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=e;const n=this._nodes.values();let o,a;for(;o=n.next(),o.done!==!0;)a=o.value,r=t(r,a.key,a.attributes);return r}nodeEntries(){const t=this._nodes.values();return new X(()=>{const e=t.next();if(e.done)return e;const r=e.value;return{value:{node:r.key,attributes:r.attributes},done:!1}})}exportNode(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new m(`Graph.exportNode: could not find the "${t}" node in the graph.`);return Ot(t,e)}exportEdge(t){t=""+t;const e=this._edges.get(t);if(!e)throw new m(`Graph.exportEdge: could not find the "${t}" edge in the graph.`);return Mt(t,e)}export(){const t=new Array(this._nodes.size);let e=0;this._nodes.forEach((n,o)=>{t[e++]=Ot(o,n)});const r=new Array(this._edges.size);return e=0,this._edges.forEach((n,o)=>{r[e++]=Mt(o,n)}),{attributes:this.getAttributes(),nodes:t,edges:r,options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops}}}importNode(t,e=!1){const r=jn(t);if(r){if(r==="not-object")throw new b('Graph.importNode: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(r==="no-key")throw new b("Graph.importNode: no key provided.");if(r==="invalid-attributes")throw new b("Graph.importNode: invalid attributes. Attributes should be a plain object, null or omitted.")}const{key:n,attributes:o={}}=t;return e?this.mergeNode(n,o):this.addNode(n,o),this}importEdge(t,e=!1){const r=Bn(t);if(r){if(r==="not-object")throw new b('Graph.importEdge: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(r==="no-source")throw new b("Graph.importEdge: missing souce.");if(r==="no-target")throw new b("Graph.importEdge: missing target.");if(r==="invalid-attributes")throw new b("Graph.importEdge: invalid attributes. Attributes should be a plain object, null or omitted.");if(r==="invalid-undirected")throw new b("Graph.importEdge: invalid undirected. Undirected should be boolean or omitted.")}const{source:n,target:o,attributes:a={},undirected:s=!1}=t;let d;return"key"in t?(d=e?s?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:s?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,d.call(this,t.key,n,o,a)):(d=e?s?this.mergeUndirectedEdge:this.mergeDirectedEdge:s?this.addUndirectedEdge:this.addDirectedEdge,d.call(this,n,o,a)),this}import(t,e=!1){if(Li(t))return this.import(t.export(),e),this;if(!$(t))throw new b("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!$(t.attributes))throw new b("Graph.import: invalid attributes. Expecting a plain object.");e?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let r,n,o;if(t.nodes){if(o=t.nodes,!Array.isArray(o))throw new b("Graph.import: invalid nodes. Expecting an array.");for(r=0,n=o.length;r<n;r++)this.importNode(o[r],e)}if(t.edges){if(o=t.edges,!Array.isArray(o))throw new b("Graph.import: invalid edges. Expecting an array.");for(r=0,n=o.length;r<n;r++)this.importEdge(o[r],e)}return this}nullCopy(t){const e=new G(P({},this._options,t));return e.replaceAttributes(P({},this.getAttributes())),e}emptyCopy(t){const e=this.nullCopy(t);return this._nodes.forEach((r,n)=>{const o=P({},r.attributes);r=new e.NodeDataClass(n,o),e._nodes.set(n,r)}),e}copy(){const t=this.emptyCopy(),e=this._edges.values();let r,n;for(;r=e.next(),r.done!==!0;)n=r.value,_r(t,"copy",!1,n.undirected,n.key,n.source.key,n.target.key,P({},n.attributes));return t}upgradeToMixed(){return this.type==="mixed"?this:(this._nodes.forEach(t=>t.upgradeToMixed()),this._options.type="mixed",K(this,"type",this._options.type),Y(this,"NodeDataClass",at),this)}upgradeToMulti(){return this.multi?this:(this._options.multi=!0,K(this,"multi",!0),Di(this),this)}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((o,a)=>{t[a]=o.attributes});const e={},r={};this._edges.forEach((o,a)=>{const s=o.undirected?"--":"->";let d="",u=o.source.key,h=o.target.key,c;o.undirected&&u>h&&(c=u,u=h,h=c);const l=`(${u})${s}(${h})`;a.startsWith("geid_")?this.multi&&(typeof r[l]>"u"?r[l]=0:r[l]++,d+=`${r[l]}. `):d+=`[${a}]: `,d+=l,e[d]=o.attributes});const n={};for(const o in this)this.hasOwnProperty(o)&&!Pt.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(n[o]=this[o]);return n.attributes=this._attributes,n.nodes=t,n.edges=e,Y(n,"constructor",this.constructor),n}}typeof Symbol<"u"&&(G.prototype[Symbol.for("nodejs.util.inspect.custom")]=G.prototype.inspect);Vn.forEach(i=>{["add","merge","update"].forEach(t=>{const e=i.name(t),r=t==="add"?_r:Kn;i.generateKey?G.prototype[e]=function(n,o,a){return r(this,e,!0,(i.type||this.type)==="undirected",null,n,o,a,t==="update")}:G.prototype[e]=function(n,o,a,s){return r(this,e,!1,(i.type||this.type)==="undirected",n,o,a,s,t==="update")}})});Bi(G);en(G);Dn(G);Un(G);class wr extends G{constructor(t){const e=P({type:"directed"},t);if("multi"in e&&e.multi!==!1)throw new b("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="directed")throw new b('DirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class br extends G{constructor(t){const e=P({type:"undirected"},t);if("multi"in e&&e.multi!==!1)throw new b("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="undirected")throw new b('UndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Er extends G{constructor(t){const e=P({multi:!0},t);if("multi"in e&&e.multi!==!0)throw new b("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(e)}}class xr extends G{constructor(t){const e=P({type:"directed",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new b("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="directed")throw new b('MultiDirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Sr extends G{constructor(t){const e=P({type:"undirected",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new b("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="undirected")throw new b('MultiUndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}function xe(i){i.from=function(t,e){const r=P({},t.options,e),n=new i(r);return n.import(t),n}}xe(G);xe(wr);xe(br);xe(Er);xe(xr);xe(Sr);G.Graph=G;G.DirectedGraph=wr;G.UndirectedGraph=br;G.MultiGraph=Er;G.MultiDirectedGraph=xr;G.MultiUndirectedGraph=Sr;G.InvalidArgumentsGraphError=b;G.NotFoundGraphError=m;G.UsageGraphError=C;var te={},gt={},Ar=function(t,e){var r=e.length;if(r!==0){var n=t.length;t.length+=r;for(var o=0;o<r;o++)t[n+o]=e[o]}},He={},Cr={},A={},Lr=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"},I={};Object.defineProperty(I,"__esModule",{value:!0});I.multiplyVec2=I.multiply=I.translate=I.rotate=I.scale=I.identity=void 0;function Xn(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}I.identity=Xn;function Qn(i,t,e){return i[0]=t,i[4]=typeof e=="number"?e:t,i}I.scale=Qn;function Zn(i,t){var e=Math.sin(t),r=Math.cos(t);return i[0]=r,i[1]=e,i[3]=-e,i[4]=r,i}I.rotate=Zn;function Jn(i,t,e){return i[6]=t,i[7]=e,i}I.translate=Jn;function eo(i,t){var e=i[0],r=i[1],n=i[2],o=i[3],a=i[4],s=i[5],d=i[6],u=i[7],h=i[8],c=t[0],l=t[1],f=t[2],g=t[3],v=t[4],y=t[5],_=t[6],p=t[7],x=t[8];return i[0]=c*e+l*o+f*d,i[1]=c*r+l*a+f*u,i[2]=c*n+l*s+f*h,i[3]=g*e+v*o+y*d,i[4]=g*r+v*a+y*u,i[5]=g*n+v*s+y*h,i[6]=_*e+p*o+x*d,i[7]=_*r+p*a+x*u,i[8]=_*n+p*s+x*h,i}I.multiply=eo;function to(i,t,e){e===void 0&&(e=1);var r=i[0],n=i[1],o=i[3],a=i[4],s=i[6],d=i[7],u=t.x,h=t.y;return{x:u*r+h*o+s*e,y:u*n+h*a+d*e}}I.multiplyVec2=to;var We={};Object.defineProperty(We,"__esModule",{value:!0});We.HTML_COLORS=void 0;We.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"};var kt=w&&w.__read||function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o},ro=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(A,"__esModule",{value:!0});A.validateGraph=A.canUse32BitsIndices=A.extractPixel=A.getMatrixImpact=A.matrixFromCamera=A.getCorrectionRatio=A.floatColor=A.floatArrayColor=A.parseColor=A.zIndexOrdering=A.createNormalizationFunction=A.graphExtent=A.getPixelRatio=A.createElement=A.cancelFrame=A.requestFrame=A.assignDeep=A.assign=A.isPlainObject=void 0;var io=ro(Lr),D=I,ze=We;function Tr(i){return typeof i=="object"&&i!==null&&i.constructor===Object}A.isPlainObject=Tr;function no(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];i=i||{};for(var r=0,n=t.length;r<n;r++){var o=t[r];o&&Object.assign(i,o)}return i}A.assign=no;function Rr(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];i=i||{};for(var r=0,n=t.length;r<n;r++){var o=t[r];if(o)for(var a in o)Tr(o[a])?i[a]=Rr(i[a],o[a]):i[a]=o[a]}return i}A.assignDeep=Rr;A.requestFrame=typeof requestAnimationFrame<"u"?function(i){return requestAnimationFrame(i)}:function(i){return setTimeout(i,0)};A.cancelFrame=typeof cancelAnimationFrame<"u"?function(i){return cancelAnimationFrame(i)}:function(i){return clearTimeout(i)};function oo(i,t,e){var r=document.createElement(i);if(t)for(var n in t)r.style[n]=t[n];if(e)for(var n in e)r.setAttribute(n,e[n]);return r}A.createElement=oo;function ao(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}A.getPixelRatio=ao;function so(i){if(!i.order)return{x:[0,1],y:[0,1]};var t=1/0,e=-1/0,r=1/0,n=-1/0;return i.forEachNode(function(o,a){var s=a.x,d=a.y;s<t&&(t=s),s>e&&(e=s),d<r&&(r=d),d>n&&(n=d)}),{x:[t,e],y:[r,n]}}A.graphExtent=so;function uo(i){var t=kt(i.x,2),e=t[0],r=t[1],n=kt(i.y,2),o=n[0],a=n[1],s=Math.max(r-e,a-o),d=(r+e)/2,u=(a+o)/2;(s===0||Math.abs(s)===1/0||isNaN(s))&&(s=1),isNaN(d)&&(d=0),isNaN(u)&&(u=0);var h=function(c){return{x:.5+(c.x-d)/s,y:.5+(c.y-u)/s}};return h.applyTo=function(c){c.x=.5+(c.x-d)/s,c.y=.5+(c.y-u)/s},h.inverse=function(c){return{x:d+s*(c.x-.5),y:u+s*(c.y-.5)}},h.ratio=s,h}A.createNormalizationFunction=uo;function ho(i,t,e){return e.sort(function(r,n){var o=t(r)||0,a=t(n)||0;return o<a?-1:o>a?1:0})}A.zIndexOrdering=ho;var Gr=new Int8Array(4),co=new Int32Array(Gr.buffer,0,1),lo=new Float32Array(Gr.buffer,0,1),fo=/^\s*rgba?\s*\(/,po=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function yt(i){var t=0,e=0,r=0,n=1;if(i[0]==="#")i.length===4?(t=parseInt(i.charAt(1)+i.charAt(1),16),e=parseInt(i.charAt(2)+i.charAt(2),16),r=parseInt(i.charAt(3)+i.charAt(3),16)):(t=parseInt(i.charAt(1)+i.charAt(2),16),e=parseInt(i.charAt(3)+i.charAt(4),16),r=parseInt(i.charAt(5)+i.charAt(6),16)),i.length===9&&(n=parseInt(i.charAt(7)+i.charAt(8),16)/255);else if(fo.test(i)){var o=i.match(po);o&&(t=+o[1],e=+o[2],r=+o[3],o[4]&&(n=+o[4]))}return{r:t,g:e,b:r,a:n}}A.parseColor=yt;var me={};for(var Oe in ze.HTML_COLORS)me[Oe]=Dr(ze.HTML_COLORS[Oe]),me[ze.HTML_COLORS[Oe]]=me[Oe];function go(i){i=ze.HTML_COLORS[i]||i;var t=yt(i),e=t.r,r=t.g,n=t.b,o=t.a;return new Float32Array([e/255,r/255,n/255,o])}A.floatArrayColor=go;function Dr(i){if(typeof me[i]<"u")return me[i];var t=yt(i),e=t.r,r=t.g,n=t.b,o=t.a;o=o*255|0,co[0]=(o<<24|n<<16|r<<8|e)&4278190079;var a=lo[0];return me[i]=a,a}A.floatColor=Dr;function Nr(i,t){var e=i.height/i.width,r=t.height/t.width;return e<1&&r>1||e>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/e,e))}A.getCorrectionRatio=Nr;function yo(i,t,e,r,n){var o=i.angle,a=i.ratio,s=i.x,d=i.y,u=t.width,h=t.height,c=(0,D.identity)(),l=Math.min(u,h)-2*r,f=Nr(t,e);return n?((0,D.multiply)(c,(0,D.translate)((0,D.identity)(),s,d)),(0,D.multiply)(c,(0,D.scale)((0,D.identity)(),a)),(0,D.multiply)(c,(0,D.rotate)((0,D.identity)(),o)),(0,D.multiply)(c,(0,D.scale)((0,D.identity)(),u/l/2/f,h/l/2/f))):((0,D.multiply)(c,(0,D.scale)((0,D.identity)(),2*(l/u)*f,2*(l/h)*f)),(0,D.multiply)(c,(0,D.rotate)((0,D.identity)(),-o)),(0,D.multiply)(c,(0,D.scale)((0,D.identity)(),1/a)),(0,D.multiply)(c,(0,D.translate)((0,D.identity)(),-s,-d))),c}A.matrixFromCamera=yo;function vo(i,t,e){var r=(0,D.multiplyVec2)(i,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),n=r.x,o=r.y;return 1/Math.sqrt(Math.pow(n,2)+Math.pow(o,2))/e.width}A.getMatrixImpact=vo;function mo(i,t,e,r){var n=r||new Uint8Array(4);return i.readPixels(t,e,1,1,i.RGBA,i.UNSIGNED_BYTE,n),n}A.extractPixel=mo;function _o(i){var t=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext;return t||!!i.getExtension("OES_element_index_uint")}A.canUse32BitsIndices=_o;function wo(i){if(!(0,io.default)(i))throw new Error("Sigma: invalid graph instance.");i.forEachNode(function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}A.validateGraph=wo;var vt={};(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.cubicInOut=i.cubicOut=i.cubicIn=i.quadraticInOut=i.quadraticOut=i.quadraticIn=i.linear=void 0;var t=function(u){return u};i.linear=t;var e=function(u){return u*u};i.quadraticIn=e;var r=function(u){return u*(2-u)};i.quadraticOut=r;var n=function(u){return(u*=2)<1?.5*u*u:-.5*(--u*(u-2)-1)};i.quadraticInOut=n;var o=function(u){return u*u*u};i.cubicIn=o;var a=function(u){return--u*u*u+1};i.cubicOut=a;var s=function(u){return(u*=2)<1?.5*u*u*u:.5*((u-=2)*u*u+2)};i.cubicInOut=s;var d={linear:i.linear,quadraticIn:i.quadraticIn,quadraticOut:i.quadraticOut,quadraticInOut:i.quadraticInOut,cubicIn:i.cubicIn,cubicOut:i.cubicOut,cubicInOut:i.cubicInOut};i.default=d})(vt);(function(i){var t=w&&w.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(i,"__esModule",{value:!0}),i.animateNodes=i.ANIMATE_DEFAULTS=void 0;var e=A,r=t(vt);i.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150};function n(o,a,s,d){var u=Object.assign({},i.ANIMATE_DEFAULTS,s),h=typeof u.easing=="function"?u.easing:r.default[u.easing],c=Date.now(),l={};for(var f in a){var g=a[f];l[f]={};for(var v in g)l[f][v]=o.getNodeAttribute(f,v)}var y=null,_=function(){y=null;var p=(Date.now()-c)/u.duration;if(p>=1){for(var x in a){var E=a[x];for(var S in E)o.setNodeAttribute(x,S,E[S])}typeof d=="function"&&d();return}p=h(p);for(var x in a){var E=a[x],T=l[x];for(var S in E)o.setNodeAttribute(x,S,E[S]*p+T[S]*(1-p))}y=(0,e.requestFrame)(_)};return _(),function(){y&&(0,e.cancelFrame)(y)}}i.animateNodes=n})(Cr);var Se={},bo=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(Se,"__esModule",{value:!0});Se.TypedEventEmitter=void 0;var Eo=hr,xo=function(i){bo(t,i);function t(){var e=i.call(this)||this;return e.rawEmitter=e,e}return t}(Eo.EventEmitter);Se.TypedEventEmitter=xo;var So=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ao=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(He,"__esModule",{value:!0});var Co=Cr,Lo=Ao(vt),it=A,To=Se,Me=1.5,Ro=function(i){So(t,i);function t(){var e=i.call(this)||this;return e.x=.5,e.y=.5,e.angle=0,e.ratio=1,e.minRatio=null,e.maxRatio=null,e.nextFrame=null,e.previousState=null,e.enabled=!0,e.previousState=e.getState(),e}return t.from=function(e){var r=new t;return r.setState(e)},t.prototype.enable=function(){return this.enabled=!0,this},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},t.prototype.hasState=function(e){return this.x===e.x&&this.y===e.y&&this.ratio===e.ratio&&this.angle===e.angle},t.prototype.getPreviousState=function(){var e=this.previousState;return e?{x:e.x,y:e.y,angle:e.angle,ratio:e.ratio}:null},t.prototype.getBoundedRatio=function(e){var r=e;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r},t.prototype.validateState=function(e){var r={};return typeof e.x=="number"&&(r.x=e.x),typeof e.y=="number"&&(r.y=e.y),typeof e.angle=="number"&&(r.angle=e.angle),typeof e.ratio=="number"&&(r.ratio=this.getBoundedRatio(e.ratio)),r},t.prototype.isAnimated=function(){return!!this.nextFrame},t.prototype.setState=function(e){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(e);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),typeof r.angle=="number"&&(this.angle=r.angle),typeof r.ratio=="number"&&(this.ratio=r.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},t.prototype.updateState=function(e){return this.setState(e(this.getState())),this},t.prototype.animate=function(e,r,n){var o=this;if(this.enabled){var a=Object.assign({},Co.ANIMATE_DEFAULTS,r),s=this.validateState(e),d=typeof a.easing=="function"?a.easing:Lo.default[a.easing],u=Date.now(),h=this.getState(),c=function(){var l=(Date.now()-u)/a.duration;if(l>=1){o.nextFrame=null,o.setState(s),o.animationCallback&&(o.animationCallback.call(null),o.animationCallback=void 0);return}var f=d(l),g={};typeof s.x=="number"&&(g.x=h.x+(s.x-h.x)*f),typeof s.y=="number"&&(g.y=h.y+(s.y-h.y)*f),typeof s.angle=="number"&&(g.angle=h.angle+(s.angle-h.angle)*f),typeof s.ratio=="number"&&(g.ratio=h.ratio+(s.ratio-h.ratio)*f),o.setState(g),o.nextFrame=(0,it.requestFrame)(c)};this.nextFrame?((0,it.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,it.requestFrame)(c)):c(),this.animationCallback=n}},t.prototype.animatedZoom=function(e){if(!e)this.animate({ratio:this.ratio/Me});else{if(typeof e=="number")return this.animate({ratio:this.ratio/e});this.animate({ratio:this.ratio/(e.factor||Me)},e)}},t.prototype.animatedUnzoom=function(e){if(!e)this.animate({ratio:this.ratio*Me});else{if(typeof e=="number")return this.animate({ratio:this.ratio*e});this.animate({ratio:this.ratio*(e.factor||Me)},e)}},t.prototype.animatedReset=function(e){this.animate({x:.5,y:.5,ratio:1,angle:0},e)},t.prototype.copy=function(){return t.from(this.getState())},t}(To.TypedEventEmitter);He.default=Ro;var Ve={},k={},Go=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),we=w&&w.__assign||function(){return we=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},we.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0});k.getWheelDelta=k.getTouchCoords=k.getTouchesArray=k.getWheelCoords=k.getMouseCoords=k.getPosition=void 0;var Do=Se;function mt(i,t){var e=t.getBoundingClientRect();return{x:i.clientX-e.left,y:i.clientY-e.top}}k.getPosition=mt;function Fr(i,t){var e=we(we({},mt(i,t)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0},original:i});return e}k.getMouseCoords=Fr;function No(i,t){return we(we({},Fr(i,t)),{delta:Mr(i)})}k.getWheelCoords=No;var Fo=2;function Or(i){for(var t=[],e=0,r=Math.min(i.length,Fo);e<r;e++)t.push(i[e]);return t}k.getTouchesArray=Or;function Oo(i,t){return{touches:Or(i.touches).map(function(e){return mt(e,t)}),original:i}}k.getTouchCoords=Oo;function Mr(i){if(typeof i.deltaY<"u")return i.deltaY*-3/360;if(typeof i.detail<"u")return i.detail/-9;throw new Error("Captor: could not extract delta from event.")}k.getWheelDelta=Mr;var Mo=function(i){Go(t,i);function t(e,r){var n=i.call(this)||this;return n.container=e,n.renderer=r,n}return t}(Do.TypedEventEmitter);k.default=Mo;var Po=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$o=w&&w.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),ko=w&&w.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),Io=w&&w.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&$o(t,i,e);return ko(t,i),t};Object.defineProperty(Ve,"__esModule",{value:!0});var V=Io(k),zo=100,Uo=3,jo=200,It=3,zt=250,Ut=1.7,Bo=300,Ho=2.2,Wo=200,Vo=function(i){Po(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.enabled=!0,n.draggedEvents=0,n.downStartTime=null,n.lastMouseX=null,n.lastMouseY=null,n.isMouseDown=!1,n.isMoving=!1,n.movingTimeout=null,n.startCameraState=null,n.clicks=0,n.doubleClickTimeout=null,n.currentWheelDirection=0,n.handleClick=n.handleClick.bind(n),n.handleRightClick=n.handleRightClick.bind(n),n.handleDown=n.handleDown.bind(n),n.handleUp=n.handleUp.bind(n),n.handleMove=n.handleMove.bind(n),n.handleWheel=n.handleWheel.bind(n),n.handleOut=n.handleOut.bind(n),e.addEventListener("click",n.handleClick,!1),e.addEventListener("contextmenu",n.handleRightClick,!1),e.addEventListener("mousedown",n.handleDown,!1),e.addEventListener("wheel",n.handleWheel,!1),e.addEventListener("mouseout",n.handleOut,!1),document.addEventListener("mousemove",n.handleMove,!1),document.addEventListener("mouseup",n.handleUp,!1),n}return t.prototype.kill=function(){var e=this.container;e.removeEventListener("click",this.handleClick),e.removeEventListener("contextmenu",this.handleRightClick),e.removeEventListener("mousedown",this.handleDown),e.removeEventListener("wheel",this.handleWheel),e.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},t.prototype.handleClick=function(e){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(e);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},Bo),this.draggedEvents<Uo&&this.emit("click",(0,V.getMouseCoords)(e,this.container))}},t.prototype.handleRightClick=function(e){this.enabled&&this.emit("rightClick",(0,V.getMouseCoords)(e,this.container))},t.prototype.handleDoubleClick=function(e){if(this.enabled){e.preventDefault(),e.stopPropagation();var r=(0,V.getMouseCoords)(e,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var n=this.renderer.getCamera(),o=n.getBoundedRatio(n.getState().ratio/Ho);n.animate(this.renderer.getViewportZoomedState((0,V.getPosition)(e,this.container),o),{easing:"quadraticInOut",duration:Wo})}}},t.prototype.handleDown=function(e){if(this.enabled){if(e.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=(0,V.getPosition)(e,this.container),n=r.x,o=r.y;this.lastMouseX=n,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",(0,V.getMouseCoords)(e,this.container))}},t.prototype.handleUp=function(e){var r=this;if(!(!this.enabled||!this.isMouseDown)){var n=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=(0,V.getPosition)(e,this.container),a=o.x,s=o.y,d=n.getState(),u=n.getPreviousState()||{x:0,y:0};this.isMoving?n.animate({x:d.x+It*(d.x-u.x),y:d.y+It*(d.y-u.y)},{duration:jo,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==s)&&n.setState({x:d.x,y:d.y}),this.isMoving=!1,setTimeout(function(){r.draggedEvents=0,r.renderer.refresh()},0),this.emit("mouseup",(0,V.getMouseCoords)(e,this.container))}},t.prototype.handleMove=function(e){var r=this;if(this.enabled){var n=(0,V.getMouseCoords)(e,this.container);if(this.emit("mousemovebody",n),e.target===this.container&&this.emit("mousemove",n),!n.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},zo);var o=this.renderer.getCamera(),a=(0,V.getPosition)(e,this.container),s=a.x,d=a.y,u=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),h=this.renderer.viewportToFramedGraph({x:s,y:d}),c=u.x-h.x,l=u.y-h.y,f=o.getState(),g=f.x+c,v=f.y+l;o.setState({x:g,y:v}),this.lastMouseX=s,this.lastMouseY=d,e.preventDefault(),e.stopPropagation()}}},t.prototype.handleWheel=function(e){var r=this;if(this.enabled){e.preventDefault(),e.stopPropagation();var n=(0,V.getWheelDelta)(e);if(n){var o=(0,V.getWheelCoords)(e,this.container);if(this.emit("wheel",o),!o.sigmaDefaultPrevented){var a=n>0?1/Ut:Ut,s=this.renderer.getCamera(),d=s.getBoundedRatio(s.getState().ratio*a),u=n>0?1:-1,h=Date.now();this.currentWheelDirection===u&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<zt/5||(s.animate(this.renderer.getViewportZoomedState((0,V.getPosition)(e,this.container),d),{easing:"quadraticOut",duration:zt},function(){r.currentWheelDirection=0}),this.currentWheelDirection=u,this.lastWheelTriggerTime=h)}}}},t.prototype.handleOut=function(){},t}(V.default);Ve.default=Vo;var Q={},qo=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Q,"__esModule",{value:!0});Q.rectangleCollidesWithQuad=Q.squareCollidesWithQuad=Q.getCircumscribedAlignedRectangle=Q.isRectangleAligned=void 0;var st=qo(Ar),q=4,Ce=5,ye=5460,z=0,U=1,j=2,B=3,Yo=1,Ko=2,Xo=3,Qo=4,jt=!1;function Pr(i){return i.x1===i.x2||i.y1===i.y2}Q.isRectangleAligned=Pr;function $r(i){var t=Math.sqrt(Math.pow(i.x2-i.x1,2)+Math.pow(i.y2-i.y1,2)),e={x:(i.y1-i.y2)*i.height/t,y:(i.x2-i.x1)*i.height/t},r={x:i.x1,y:i.y1},n={x:i.x2,y:i.y2},o={x:i.x1+e.x,y:i.y1+e.y},a={x:i.x2+e.x,y:i.y2+e.y},s=Math.min(r.x,n.x,o.x,a.x),d=Math.max(r.x,n.x,o.x,a.x),u=Math.min(r.y,n.y,o.y,a.y),h=Math.max(r.y,n.y,o.y,a.y);return{x1:s,y1:u,x2:d,y2:u,height:h-u}}Q.getCircumscribedAlignedRectangle=$r;function Le(i,t,e,r,n,o,a){return i<r+o&&i+e>r&&t<n+a&&t+e>n}Q.squareCollidesWithQuad=Le;function Te(i,t,e,r,n,o,a,s){return i<n+a&&i+e>n&&t<o+s&&t+r>o}Q.rectangleCollidesWithQuad=Te;function Zo(i,t,e,r,n,o){var a=e+n/2,s=r+o/2,d=t<s,u=i<a;return d?u?Yo:Ko:u?Xo:Qo}function Jo(i,t){for(var e=[0,0];e.length;){var r=e.pop(),n=e.pop(),o=4*n+q,a=4*n+2*q,s=4*n+3*q,d=4*n+4*q,u=t[n+z],h=t[n+U],c=t[n+j],l=t[n+B],f=c/2,g=l/2;t[o+z]=u,t[o+U]=h,t[o+j]=f,t[o+B]=g,t[a+z]=u+f,t[a+U]=h,t[a+j]=f,t[a+B]=g,t[s+z]=u,t[s+U]=h+g,t[s+j]=f,t[s+B]=g,t[d+z]=u+f,t[d+U]=h+g,t[d+j]=f,t[d+B]=g,r<i-1&&(e.push(d,r+1),e.push(s,r+1),e.push(a,r+1),e.push(o,r+1))}}function ea(i,t,e,r,n,o,a){for(var s=n-a,d=o-a,u=a*2,h=0,c=0;;){if(h>=i){e[c]=e[c]||[],e[c].push(r);return}var l=4*c+q,f=4*c+2*q,g=4*c+3*q,v=4*c+4*q,y=Le(s,d,u,t[l+z],t[l+U],t[l+j],t[l+B]),_=Le(s,d,u,t[f+z],t[f+U],t[f+j],t[f+B]),p=Le(s,d,u,t[g+z],t[g+U],t[g+j],t[g+B]),x=Le(s,d,u,t[v+z],t[v+U],t[v+j],t[v+B]),E=[y,_,p,x].reduce(function(S,T){return T?S+1:S},0);if(E===0&&h===0){e[ye].push(r),!jt&&e[ye].length>=5&&(jt=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box."));return}if(E===0)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(h,", key: ").concat(r,", x: ").concat(n,", y: ").concat(o,", size: ").concat(a,")."));if(E===3)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(h,", key: ").concat(r,", x: ").concat(n,", y: ").concat(o,", size: ").concat(a,")."));if(E>1){e[c]=e[c]||[],e[c].push(r);return}else h++;y&&(c=l),_&&(c=f),p&&(c=g),x&&(c=v)}}function ta(i,t,e,r,n,o,a){for(var s=[0,0],d=[],u;s.length;){var h=s.pop(),c=s.pop();if(u=e[c],u&&(0,st.default)(d,u),!(h>=i)){var l=4*c+q,f=4*c+2*q,g=4*c+3*q,v=4*c+4*q,y=Te(r,n,o,a,t[l+z],t[l+U],t[l+j],t[l+B]),_=Te(r,n,o,a,t[f+z],t[f+U],t[f+j],t[f+B]),p=Te(r,n,o,a,t[g+z],t[g+U],t[g+j],t[g+B]),x=Te(r,n,o,a,t[v+z],t[v+U],t[v+j],t[v+B]);y&&s.push(l,h+1),_&&s.push(f,h+1),p&&s.push(g,h+1),x&&s.push(v,h+1)}}return d}var ra=function(){function i(t){var e;t===void 0&&(t={}),this.containers=(e={},e[ye]=[],e),this.cache=null,this.lastRectangle=null;var r=Math.pow(4,Ce);this.data=new Float32Array(q*((4*r-1)/3)),t.boundaries?this.resize(t.boundaries):this.resize({x:0,y:0,width:1,height:1})}return i.prototype.add=function(t,e,r,n){return ea(Ce,this.data,this.containers,t,e,r,n),this},i.prototype.resize=function(t){this.clear(),this.data[z]=t.x,this.data[U]=t.y,this.data[j]=t.width,this.data[B]=t.height,Jo(Ce,this.data)},i.prototype.clear=function(){var t;return this.containers=(t={},t[ye]=[],t),this},i.prototype.point=function(t,e){var r=this.containers[ye].slice(),n=0,o=0;do{this.containers[n]&&(0,st.default)(r,this.containers[n]);var a=Zo(t,e,this.data[n+z],this.data[n+U],this.data[n+j],this.data[n+B]);n=4*n+a*q,o++}while(o<=Ce);return r},i.prototype.rectangle=function(t,e,r,n,o){var a=this.lastRectangle;return a&&t===a.x1&&r===a.x2&&e===a.y1&&n===a.y2&&o===a.height?this.cache:(this.lastRectangle={x1:t,y1:e,x2:r,y2:n,height:o},Pr(this.lastRectangle)||(this.lastRectangle=$r(this.lastRectangle)),this.cache=ta(Ce,this.data,this.containers,t,e,Math.abs(t-r)||Math.abs(e-n),o),(0,st.default)(this.cache,this.containers[ye]),this.cache)},i}();Q.default=ra;var be={};Object.defineProperty(be,"__esModule",{value:!0});be.edgeLabelsToDisplayFromNodes=be.LabelGrid=void 0;var Bt=function(){function i(t,e){this.key=t,this.size=e}return i.compare=function(t,e){return t.size>e.size?-1:t.size<e.size||t.key>e.key?1:-1},i}(),ia=function(){function i(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return i.prototype.resizeAndClear=function(t,e){this.width=t.width,this.height=t.height,this.cellSize=e,this.columns=Math.ceil(t.width/e),this.rows=Math.ceil(t.height/e),this.cells={}},i.prototype.getIndex=function(t){var e=Math.floor(t.x/this.cellSize),r=Math.floor(t.y/this.cellSize);return r*this.columns+e},i.prototype.add=function(t,e,r){var n=new Bt(t,e),o=this.getIndex(r),a=this.cells[o];a||(a=[],this.cells[o]=a),a.push(n)},i.prototype.organize=function(){for(var t in this.cells){var e=this.cells[t];e.sort(Bt.compare)}},i.prototype.getLabelsToDisplay=function(t,e){var r=this.cellSize*this.cellSize,n=r/t/t,o=n*e/r,a=Math.ceil(o),s=[];for(var d in this.cells)for(var u=this.cells[d],h=0;h<Math.min(a,u.length);h++)s.push(u[h].key);return s},i}();be.LabelGrid=ia;function na(i){var t=i.graph,e=i.hoveredNode,r=i.highlightedNodes,n=i.displayedNodeLabels,o=[];return t.forEachEdge(function(a,s,d,u){(d===e||u===e||r.has(d)||r.has(u)||n.has(d)&&n.has(u))&&o.push(a)}),o}be.edgeLabelsToDisplayFromNodes=na;var kr={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});function oa(i,t,e){if(t.label){var r=e.labelSize,n=e.labelFont,o=e.labelWeight,a=e.labelColor.attribute?t[e.labelColor.attribute]||e.labelColor.color||"#000":e.labelColor.color;i.fillStyle=a,i.font="".concat(o," ").concat(r,"px ").concat(n),i.fillText(t.label,t.x+t.size+3,t.y+r/3)}}qe.default=oa;var _t={},aa=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_t,"__esModule",{value:!0});var sa=aa(qe);function ua(i,t,e){var r=e.labelSize,n=e.labelFont,o=e.labelWeight;i.font="".concat(o," ").concat(r,"px ").concat(n),i.fillStyle="#FFF",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=8,i.shadowColor="#000";var a=2;if(typeof t.label=="string"){var s=i.measureText(t.label).width,d=Math.round(s+5),u=Math.round(r+2*a),h=Math.max(t.size,r/2)+a,c=Math.asin(u/2/h),l=Math.sqrt(Math.abs(Math.pow(h,2)-Math.pow(u/2,2)));i.beginPath(),i.moveTo(t.x+l,t.y+u/2),i.lineTo(t.x+h+d,t.y+u/2),i.lineTo(t.x+h+d,t.y-u/2),i.lineTo(t.x+l,t.y-u/2),i.arc(t.x,t.y,h,c,-c),i.closePath(),i.fill()}else i.beginPath(),i.arc(t.x,t.y,t.size+a,0,Math.PI*2),i.closePath(),i.fill();i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,(0,sa.default)(i,t,e)}_t.default=ua;var wt={};Object.defineProperty(wt,"__esModule",{value:!0});function da(i,t,e,r,n){var o=n.edgeLabelSize,a=n.edgeLabelFont,s=n.edgeLabelWeight,d=n.edgeLabelColor.attribute?t[n.edgeLabelColor.attribute]||n.edgeLabelColor.color||"#000":n.edgeLabelColor.color,u=t.label;if(u){i.fillStyle=d,i.font="".concat(s," ").concat(o,"px ").concat(a);var h=e.size,c=r.size,l=e.x,f=e.y,g=r.x,v=r.y,y=(l+g)/2,_=(f+v)/2,p=g-l,x=v-f,E=Math.sqrt(p*p+x*x);if(!(E<h+c)){l+=p*h/E,f+=x*h/E,g-=p*c/E,v-=x*c/E,y=(l+g)/2,_=(f+v)/2,p=g-l,x=v-f,E=Math.sqrt(p*p+x*x);var S=i.measureText(u).width;if(S>E){var T="…";for(u=u+T,S=i.measureText(u).width;S>E&&u.length>1;)u=u.slice(0,-2)+T,S=i.measureText(u).width;if(u.length<4)return}var N;p>0?x>0?N=Math.acos(p/E):N=Math.asin(x/E):x>0?N=Math.acos(p/E)+Math.PI:N=Math.asin(p/E)+Math.PI/2,i.save(),i.translate(y,_),i.rotate(N),i.fillText(u,-S/2,t.size/2+o),i.restore()}}}wt.default=da;var bt={},fe={},ge={},pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.loadProgram=pe.loadFragmentShader=pe.loadVertexShader=void 0;function Ir(i,t,e){var r=i==="VERTEX"?t.VERTEX_SHADER:t.FRAGMENT_SHADER,n=t.createShader(r);if(n===null)throw new Error("loadShader: error while creating the shader");t.shaderSource(n,e),t.compileShader(n);var o=t.getShaderParameter(n,t.COMPILE_STATUS);if(!o){var a=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`loadShader: error while compiling the shader:
`.concat(a,`
`).concat(e))}return n}function ha(i,t){return Ir("VERTEX",i,t)}pe.loadVertexShader=ha;function ca(i,t){return Ir("FRAGMENT",i,t)}pe.loadFragmentShader=ca;function la(i,t){var e=i.createProgram();if(e===null)throw new Error("loadProgram: error while creating the program.");var r,n;for(r=0,n=t.length;r<n;r++)i.attachShader(e,t[r]);i.linkProgram(e);var o=i.getProgramParameter(e,i.LINK_STATUS);if(!o)throw i.deleteProgram(e),new Error("loadProgram: error while linking the program.");return e}pe.loadProgram=la;var ee;Object.defineProperty(ge,"__esModule",{value:!0});ge.Program=ge.AbstractProgram=void 0;var fa=A,nt=pe,pa=(ee={},ee[WebGL2RenderingContext.BOOL]=1,ee[WebGL2RenderingContext.BYTE]=1,ee[WebGL2RenderingContext.UNSIGNED_BYTE]=1,ee[WebGL2RenderingContext.SHORT]=2,ee[WebGL2RenderingContext.UNSIGNED_SHORT]=2,ee[WebGL2RenderingContext.INT]=4,ee[WebGL2RenderingContext.UNSIGNED_INT]=4,ee[WebGL2RenderingContext.FLOAT]=4,ee),ga=function(){function i(t,e){}return i}();ge.AbstractProgram=ga;var ya=function(){function i(t,e){var r=this;this.array=new Float32Array,this.indicesArray=null,this.uniformLocations={},this.attributeLocations={},this.capacity=0,this.verticesCount=0;var n=this.getDefinition();this.VERTICES=n.VERTICES,this.ARRAY_ITEMS_PER_VERTEX=n.ARRAY_ITEMS_PER_VERTEX,this.VERTEX_SHADER_SOURCE=n.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=n.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=n.UNIFORMS,this.ATTRIBUTES=n.ATTRIBUTES,this.STRIDE=this.VERTICES*this.ARRAY_ITEMS_PER_VERTEX,this.gl=t,this.renderer=e;var o=t.createBuffer();if(o===null)throw new Error("Program: error while creating the webgl buffer.");this.buffer=o;var a=t.createBuffer();if(a===null)throw new Error("Program: error while creating the webgl indices buffer.");this.indicesBuffer=a,this.vertexShader=(0,nt.loadVertexShader)(this.gl,this.VERTEX_SHADER_SOURCE),this.fragmentShader=(0,nt.loadFragmentShader)(this.gl,this.FRAGMENT_SHADER_SOURCE),this.program=(0,nt.loadProgram)(this.gl,[this.vertexShader,this.fragmentShader]),this.canUse32BitsIndices=(0,fa.canUse32BitsIndices)(this.gl),this.indicesType=this.canUse32BitsIndices?t.UNSIGNED_INT:t.UNSIGNED_SHORT,this.IndicesArray=this.canUse32BitsIndices?Uint32Array:Uint16Array,this.UNIFORMS.forEach(function(s){var d=r.gl.getUniformLocation(r.program,s);if(d===null)throw new Error('Program: error while getting location for uniform "'.concat(s,'".'));r.uniformLocations[s]=d}),this.ATTRIBUTES.forEach(function(s){var d=r.gl.getAttribLocation(r.program,s.name);if(d===-1)throw new Error('Program: error while getting location for attribute "'.concat(s.name,'".'));r.attributeLocations[s.name]=d})}return i.prototype.bind=function(){var t=this,e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.buffer),this.indicesArray&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);for(var r in this.attributeLocations)e.enableVertexAttribArray(this.attributeLocations[r]);var n=0;this.ATTRIBUTES.forEach(function(o){var a=t.attributeLocations[o.name];e.vertexAttribPointer(a,o.size,o.type,o.normalized||!1,t.ARRAY_ITEMS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT,n);var s=pa[o.type];if(typeof s!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(o.type,'"!'));n+=o.size*s})},i.prototype.bufferData=function(){var t=this.gl;this.gl.bufferData(t.ARRAY_BUFFER,this.array,t.DYNAMIC_DRAW),this.indicesArray&&this.gl.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesArray,t.STATIC_DRAW)},i.prototype.reallocateIndices=function(){},i.prototype.reallocate=function(t){t!==this.capacity&&(this.capacity=t,this.verticesCount=this.VERTICES*t,this.array=new Float32Array(this.verticesCount*this.ARRAY_ITEMS_PER_VERTEX),typeof this.reallocateIndices=="function"&&this.reallocateIndices())},i.prototype.hasNothingToRender=function(){return this.verticesCount===0},i.prototype.render=function(t){this.hasNothingToRender()||(this.bind(),this.bufferData(),this.gl.useProgram(this.program),this.draw(t))},i}();ge.Program=ya;var zr=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(fe,"__esModule",{value:!0});fe.createNodeCompoundProgram=fe.NodeProgram=fe.AbstractNodeProgram=void 0;var Ur=ge,va=function(i){zr(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(Ur.AbstractProgram);fe.AbstractNodeProgram=va;var ma=function(i){zr(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.process=function(e,r){var n=e*this.STRIDE;if(r.hidden){for(var o=n+this.STRIDE;n<o;n++)this.array[n]=0;return}return this.processVisibleItem(n,r)},t}(Ur.Program);fe.NodeProgram=ma;function _a(i){return function(){function t(e,r){this.programs=i.map(function(n){return new n(e,r)})}return t.prototype.reallocate=function(e){this.programs.forEach(function(r){return r.reallocate(e)})},t.prototype.process=function(e,r){this.programs.forEach(function(n){return n.process(e,r)})},t.prototype.render=function(e){this.programs.forEach(function(r){return r.render(e)})},t}()}fe.createNodeCompoundProgram=_a;var jr={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`attribute vec2 a_position;
attribute float a_size;
attribute vec4 a_color;

uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform mat3 u_matrix;

varying vec4 v_color;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  gl_Position = vec4(
    (u_matrix * vec3(a_position, 1)).xy,
    0,
    1
  );

  // Multiply the point size twice:
  //  - x SCALING_RATIO to correct the canvas scaling
  //  - x 2 to correct the formulae
  gl_PointSize = a_size / u_sizeRatio * u_pixelRatio * 2.0;

  v_border = (0.5 / a_size) * u_sizeRatio;

  // Extract the color:
  v_color = a_color;
  v_color.a *= bias;
}
`;jr.exports=t})();var wa=jr.exports,Br={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;
varying float v_border;

const float radius = 0.5;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  vec2 m = gl_PointCoord - vec2(0.5, 0.5);
  float dist = radius - length(m);

  float t = 0.0;
  if (dist > v_border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / v_border;

  gl_FragColor = mix(transparent, v_color, t);
}
`;Br.exports=t})();var ba=Br.exports,Ea=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hr=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(bt,"__esModule",{value:!0});var xa=A,Sa=fe,Aa=Hr(wa),Ca=Hr(ba),La=WebGLRenderingContext.UNSIGNED_BYTE,Ht=WebGLRenderingContext.FLOAT,Ta=["u_sizeRatio","u_pixelRatio","u_matrix"],Ra=function(i){Ea(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return{VERTICES:1,ARRAY_ITEMS_PER_VERTEX:4,VERTEX_SHADER_SOURCE:Aa.default,FRAGMENT_SHADER_SOURCE:Ca.default,UNIFORMS:Ta,ATTRIBUTES:[{name:"a_position",size:2,type:Ht},{name:"a_size",size:1,type:Ht},{name:"a_color",size:4,type:La,normalized:!0}]}},t.prototype.processVisibleItem=function(e,r){var n=this.array;n[e++]=r.x,n[e++]=r.y,n[e++]=r.size,n[e]=(0,xa.floatColor)(r.color)},t.prototype.draw=function(e){var r=this.gl,n=this.uniformLocations,o=n.u_sizeRatio,a=n.u_pixelRatio,s=n.u_matrix;r.uniform1f(o,e.sizeRatio),r.uniform1f(a,e.pixelRatio),r.uniformMatrix3fv(s,!1,e.matrix),r.drawArrays(r.POINTS,0,this.verticesCount)},t}(Sa.NodeProgram);bt.default=Ra;var Ye={},re={},Wr=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(re,"__esModule",{value:!0});re.createEdgeCompoundProgram=re.EdgeProgram=re.AbstractEdgeProgram=void 0;var Vr=ge,Ga=function(i){Wr(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t}(Vr.AbstractProgram);re.AbstractEdgeProgram=Ga;var Da=function(i){Wr(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.process=function(e,r,n,o){var a=e*this.STRIDE;if(o.hidden||r.hidden||n.hidden){for(var s=a+this.STRIDE;a<s;a++)this.array[a]=0;return}return this.processVisibleItem(a,r,n,o)},t}(Vr.Program);re.EdgeProgram=Da;function Na(i){return function(){function t(e,r){this.programs=i.map(function(n){return new n(e,r)})}return t.prototype.reallocate=function(e){this.programs.forEach(function(r){return r.reallocate(e)})},t.prototype.process=function(e,r,n,o){this.programs.forEach(function(a){return a.process(e,r,n,o)})},t.prototype.render=function(e){this.programs.forEach(function(r){return r.render(e)})},t}()}re.createEdgeCompoundProgram=Na;var qr={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`attribute vec4 a_color;
attribute vec2 a_normal;
attribute vec2 a_position;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // We require edges to be at least \`minThickness\` pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;
  v_color = a_color;
  v_color.a *= bias;
}
`;qr.exports=t})();var Fa=qr.exports,Yr={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float feather = 0.001;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
}
`;Yr.exports=t})();var Oa=Yr.exports,Ma=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kr=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ye,"__esModule",{value:!0});var Pa=A,$a=re,ka=Kr(Fa),Ia=Kr(Oa),za=WebGLRenderingContext.UNSIGNED_BYTE,Wt=WebGLRenderingContext.FLOAT,Ua=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio"],ja=function(i){Ma(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return{VERTICES:4,ARRAY_ITEMS_PER_VERTEX:5,VERTEX_SHADER_SOURCE:ka.default,FRAGMENT_SHADER_SOURCE:Ia.default,UNIFORMS:Ua,ATTRIBUTES:[{name:"a_position",size:2,type:Wt},{name:"a_normal",size:2,type:Wt},{name:"a_color",size:4,type:za,normalized:!0}]}},t.prototype.reallocateIndices=function(){for(var e=this.verticesCount,r=e+e/2,n=new this.IndicesArray(r),o=0,a=0;o<e;o+=4)n[a++]=o,n[a++]=o+1,n[a++]=o+2,n[a++]=o+2,n[a++]=o+1,n[a++]=o+3;this.indicesArray=n},t.prototype.processVisibleItem=function(e,r,n,o){var a=o.size||1,s=r.x,d=r.y,u=n.x,h=n.y,c=(0,Pa.floatColor)(o.color),l=u-s,f=h-d,g=l*l+f*f,v=0,y=0;g&&(g=1/Math.sqrt(g),v=-f*g*a,y=l*g*a);var _=this.array;_[e++]=s,_[e++]=d,_[e++]=v,_[e++]=y,_[e++]=c,_[e++]=s,_[e++]=d,_[e++]=-v,_[e++]=-y,_[e++]=c,_[e++]=u,_[e++]=h,_[e++]=v,_[e++]=y,_[e++]=c,_[e++]=u,_[e++]=h,_[e++]=-v,_[e++]=-y,_[e]=c},t.prototype.draw=function(e){var r=this.gl,n=this.uniformLocations,o=n.u_matrix,a=n.u_zoomRatio,s=n.u_correctionRatio,d=n.u_sizeRatio;if(r.uniformMatrix3fv(o,!1,e.matrix),r.uniform1f(a,e.zoomRatio),r.uniform1f(d,e.sizeRatio),r.uniform1f(s,e.correctionRatio),!this.indicesArray)throw new Error("EdgeRectangleProgram: indicesArray should be allocated when drawing!");r.drawElements(r.TRIANGLES,this.indicesArray.length,this.indicesType,0)},t}($a.EdgeProgram);Ye.default=ja;var Et={},xt={},Xr={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec4 a_color;
attribute vec3 a_barycentric;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadWidthLengthRatio = 0.66;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;
  float webGLArrowHeadHalfWidth = webGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadHalfWidth * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadHalfWidth * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadHalfWidth * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadHalfWidth * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  // Extract the color:
  v_color = a_color;
  v_color.a *= bias;
}
`;Xr.exports=t})();var Ba=Xr.exports,Qr={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`;Qr.exports=t})();var Ha=Qr.exports,Wa=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zr=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(xt,"__esModule",{value:!0});var Va=A,qa=re,Ya=Zr(Ba),Ka=Zr(Ha),Xa=WebGLRenderingContext.UNSIGNED_BYTE,Pe=WebGLRenderingContext.FLOAT,Qa=["u_matrix","u_sizeRatio","u_correctionRatio"],Za=function(i){Wa(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return{VERTICES:3,ARRAY_ITEMS_PER_VERTEX:9,VERTEX_SHADER_SOURCE:Ya.default,FRAGMENT_SHADER_SOURCE:Ka.default,UNIFORMS:Qa,ATTRIBUTES:[{name:"a_position",size:2,type:Pe},{name:"a_normal",size:2,type:Pe},{name:"a_radius",size:1,type:Pe},{name:"a_color",size:4,type:Xa,normalized:!0},{name:"a_barycentric",size:3,type:Pe}]}},t.prototype.processVisibleItem=function(e,r,n,o){var a=o.size||1,s=n.size||1,d=r.x,u=r.y,h=n.x,c=n.y,l=(0,Va.floatColor)(o.color),f=h-d,g=c-u,v=f*f+g*g,y=0,_=0;v&&(v=1/Math.sqrt(v),y=-g*v*a,_=f*v*a);var p=this.array;p[e++]=h,p[e++]=c,p[e++]=-y,p[e++]=-_,p[e++]=s,p[e++]=l,p[e++]=1,p[e++]=0,p[e++]=0,p[e++]=h,p[e++]=c,p[e++]=-y,p[e++]=-_,p[e++]=s,p[e++]=l,p[e++]=0,p[e++]=1,p[e++]=0,p[e++]=h,p[e++]=c,p[e++]=-y,p[e++]=-_,p[e++]=s,p[e++]=l,p[e++]=0,p[e++]=0,p[e]=1},t.prototype.draw=function(e){var r=this.gl,n=this.uniformLocations,o=n.u_matrix,a=n.u_sizeRatio,s=n.u_correctionRatio;r.uniformMatrix3fv(o,!1,e.matrix),r.uniform1f(a,e.sizeRatio),r.uniform1f(s,e.correctionRatio),r.drawArrays(r.TRIANGLES,0,this.verticesCount)},t}(qa.EdgeProgram);xt.default=Za;var St={},Jr={exports:{}};(()=>{var i={d:(r,n)=>{for(var o in n)i.o(n,o)&&!i.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:n[o]})},o:(r,n)=>Object.prototype.hasOwnProperty.call(r,n),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},t={};i.r(t),i.d(t,{default:()=>e});const e=`attribute vec4 a_color;
attribute vec2 a_normal;
attribute vec2 a_position;
attribute float a_radius;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;

const float minThickness = 1.7;
const float bias = 255.0 / 254.0;
const float arrowHeadLengthThicknessRatio = 2.5;

void main() {
  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(a_radius);
  float webGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * 2.0 * arrowHeadLengthThicknessRatio;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;
  v_color = a_color;
  v_color.a *= bias;
}
`;Jr.exports=t})();var Ja=Jr.exports,es=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ue=w&&w.__assign||function(){return Ue=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Ue.apply(this,arguments)},ei=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(St,"__esModule",{value:!0});var ts=ei(Ye),rs=ei(Ja),is=A,ns=WebGLRenderingContext.UNSIGNED_BYTE,ot=WebGLRenderingContext.FLOAT,os=function(i){es(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.getDefinition=function(){return Ue(Ue({},i.prototype.getDefinition.call(this)),{ARRAY_ITEMS_PER_VERTEX:6,VERTEX_SHADER_SOURCE:rs.default,ATTRIBUTES:[{name:"a_position",size:2,type:ot},{name:"a_normal",size:2,type:ot},{name:"a_color",size:4,type:ns,normalized:!0},{name:"a_radius",size:1,type:ot}]})},t.prototype.processVisibleItem=function(e,r,n,o){var a=o.size||1,s=r.x,d=r.y,u=n.x,h=n.y,c=(0,is.floatColor)(o.color),l=u-s,f=h-d,g=n.size||1,v=l*l+f*f,y=0,_=0;v&&(v=1/Math.sqrt(v),y=-f*v*a,_=l*v*a);var p=this.array;p[e++]=s,p[e++]=d,p[e++]=y,p[e++]=_,p[e++]=c,p[e++]=0,p[e++]=s,p[e++]=d,p[e++]=-y,p[e++]=-_,p[e++]=c,p[e++]=0,p[e++]=u,p[e++]=h,p[e++]=y,p[e++]=_,p[e++]=c,p[e++]=g,p[e++]=u,p[e++]=h,p[e++]=-y,p[e++]=-_,p[e++]=c,p[e]=-g},t}(ts.default);St.default=os;var ti=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Et,"__esModule",{value:!0});var as=re,ss=ti(xt),us=ti(St),ds=(0,as.createEdgeCompoundProgram)([us.default,ss.default]);Et.default=ds;(function(i){var t=w&&w.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(i,"__esModule",{value:!0}),i.resolveSettings=i.validateSettings=i.DEFAULT_EDGE_PROGRAM_CLASSES=i.DEFAULT_NODE_PROGRAM_CLASSES=i.DEFAULT_SETTINGS=void 0;var e=A,r=t(qe),n=t(_t),o=t(wt),a=t(bt),s=t(Ye),d=t(Et);i.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:r.default,hoverRenderer:n.default,edgeLabelRenderer:o.default,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},i.DEFAULT_NODE_PROGRAM_CLASSES={circle:a.default},i.DEFAULT_EDGE_PROGRAM_CLASSES={arrow:d.default,line:s.default};function u(c){if(typeof c.labelDensity!="number"||c.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var l=c.minCameraRatio,f=c.maxCameraRatio;if(typeof l=="number"&&typeof f=="number"&&f<l)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}i.validateSettings=u;function h(c){var l=(0,e.assign)({},i.DEFAULT_SETTINGS,c);return l.nodeProgramClasses=(0,e.assign)({},i.DEFAULT_NODE_PROGRAM_CLASSES,l.nodeProgramClasses),l.edgeProgramClasses=(0,e.assign)({},i.DEFAULT_EDGE_PROGRAM_CLASSES,l.edgeProgramClasses),l}i.resolveSettings=h})(kr);var At={},hs=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cs=w&&w.__createBinding||(Object.create?function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]}),ls=w&&w.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),fs=w&&w.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&cs(t,i,e);return ls(t,i),t},Vt=w&&w.__read||function(i,t){var e=typeof Symbol=="function"&&i[Symbol.iterator];if(!e)return i;var r=e.call(i),n,o=[],a;try{for(;(t===void 0||t-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(s){a={error:s}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(At,"__esModule",{value:!0});var le=fs(k),ps=200,qt=3,gs=200,ys=function(i){hs(t,i);function t(e,r){var n=i.call(this,e,r)||this;return n.enabled=!0,n.isMoving=!1,n.hasMoved=!1,n.touchMode=0,n.startTouchesPositions=[],n.handleStart=n.handleStart.bind(n),n.handleLeave=n.handleLeave.bind(n),n.handleMove=n.handleMove.bind(n),e.addEventListener("touchstart",n.handleStart,!1),e.addEventListener("touchend",n.handleLeave,!1),e.addEventListener("touchcancel",n.handleLeave,!1),e.addEventListener("touchmove",n.handleMove,!1),n}return t.prototype.kill=function(){var e=this.container;e.removeEventListener("touchstart",this.handleStart),e.removeEventListener("touchend",this.handleLeave),e.removeEventListener("touchcancel",this.handleLeave),e.removeEventListener("touchmove",this.handleMove)},t.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},t.prototype.dispatchRelatedMouseEvent=function(e,r,n,o){var a=n||r.touches[0],s=new MouseEvent(e,{clientX:a.clientX,clientY:a.clientY,altKey:r.altKey,ctrlKey:r.ctrlKey});s.isFakeSigmaMouseEvent=!0,(o||this.container).dispatchEvent(s)},t.prototype.handleStart=function(e){var r=this;if(this.enabled){e.preventDefault(),e.touches.length===1&&this.dispatchRelatedMouseEvent("mousedown",e);var n=(0,le.getTouchesArray)(e.touches);if(this.touchMode=n.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=n.map(function(l){return(0,le.getPosition)(l,r.container)}),this.lastTouches=n,this.lastTouchesPositions=this.startTouchesPositions,this.touchMode===2){var o=Vt(this.startTouchesPositions,2),a=o[0],s=a.x,d=a.y,u=o[1],h=u.x,c=u.y;this.startTouchesAngle=Math.atan2(c-d,h-s),this.startTouchesDistance=Math.sqrt(Math.pow(h-s,2)+Math.pow(c-d,2))}this.emit("touchdown",(0,le.getTouchCoords)(e,this.container))}},t.prototype.handleLeave=function(e){if(this.enabled){switch(e.preventDefault(),e.touches.length===0&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",e,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",e,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(e.touches.length===1){this.handleStart(e),e.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),n=r.getState(),o=r.getPreviousState()||{x:0,y:0};r.animate({x:n.x+qt*(n.x-o.x),y:n.y+qt*(n.y-o.y)},{duration:gs,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}this.emit("touchup",(0,le.getTouchCoords)(e,this.container))}},t.prototype.handleMove=function(e){var r,n=this;if(this.enabled){e.preventDefault(),e.touches.length===1&&this.dispatchRelatedMouseEvent("mousemove",e);var o=(0,le.getTouchesArray)(e.touches),a=o.map(function(se){return(0,le.getPosition)(se,n.container)});if(this.lastTouches=o,this.lastTouchesPositions=a,this.hasMoved||(this.hasMoved=a.some(function(se,Ge){var De=n.startTouchesPositions[Ge];return se.x!==De.x||se.y!==De.y})),!!this.hasMoved){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){n.isMoving=!1},ps);var s=this.renderer.getCamera(),d=this.startCameraState;switch(this.touchMode){case 1:{var u=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),h=u.x,c=u.y,l=this.renderer.viewportToFramedGraph(a[0]),f=l.x,g=l.y;s.setState({x:d.x+h-f,y:d.y+c-g});break}case 2:{var v={},y=a[0],_=y.x,p=y.y,x=a[1],E=x.x,S=x.y,T=Math.atan2(S-p,E-_)-this.startTouchesAngle,N=Math.hypot(S-p,E-_)/this.startTouchesDistance,H=s.getBoundedRatio(d.ratio/N);v.ratio=H,v.angle=d.angle+T;var O=this.getDimensions(),M=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:d}),W=Math.min(O.width,O.height),J=W/O.width,ce=W/O.height,ae=H/W,f=_-W/2/J,g=p-W/2/ce;r=Vt([f*Math.cos(-v.angle)-g*Math.sin(-v.angle),g*Math.cos(-v.angle)+f*Math.sin(-v.angle)],2),f=r[0],g=r[1],v.x=M.x-f*ae,v.y=M.y+g*ae,s.setState(v);break}}this.emit("touchmove",(0,le.getTouchCoords)(e,this.container))}}},t}(le.default);At.default=ys;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.doEdgeCollideWithPoint=Ee.isPixelColored=void 0;function vs(i,t,e){var r=new Uint8Array(4);return i.readPixels(t,i.drawingBufferHeight-e,1,1,i.RGBA,i.UNSIGNED_BYTE,r),r[3]>0}Ee.isPixelColored=vs;function ms(i,t,e,r,n,o,a){if(i<e-a&&i<n-a||t<r-a&&t<o-a||i>e+a&&i>n+a||t>r+a&&t>o+a)return!1;var s=Math.abs((n-e)*(r-t)-(e-i)*(o-r))/Math.sqrt(Math.pow(n-e,2)+Math.pow(o-r,2));return s<a/2}Ee.doEdgeCollideWithPoint=ms;var _s=w&&w.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),L=w&&w.__assign||function(){return L=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},L.apply(this,arguments)},ws=w&&w.__values||function(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],r=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Re=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(gt,"__esModule",{value:!0});var bs=Re(Ar),Yt=Re(He),Es=Re(Ve),Kt=Re(Q),xs=Se,F=A,Xt=be,$e=kr,Ss=Re(At),ke=I,Qt=Ee,Zt=150,Jt=50;function As(i,t,e){if(!e.hasOwnProperty("x")||!e.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return e.color||(e.color=i.defaultNodeColor),!e.label&&e.label!==""&&(e.label=null),e.label!==void 0&&e.label!==null?e.label=""+e.label:e.label=null,e.size||(e.size=2),e.hasOwnProperty("hidden")||(e.hidden=!1),e.hasOwnProperty("highlighted")||(e.highlighted=!1),e.hasOwnProperty("forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=i.defaultNodeType),e.zIndex||(e.zIndex=0),e}function Cs(i,t,e){return e.color||(e.color=i.defaultEdgeColor),e.label||(e.label=""),e.size||(e.size=.5),e.hasOwnProperty("hidden")||(e.hidden=!1),e.hasOwnProperty("forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=i.defaultEdgeType),e.zIndex||(e.zIndex=0),e}var Ls=function(i){_s(t,i);function t(e,r,n){n===void 0&&(n={});var o=i.call(this)||this;if(o.elements={},o.canvasContexts={},o.webGLContexts={},o.activeListeners={},o.quadtree=new Kt.default,o.labelGrid=new Xt.LabelGrid,o.nodeDataCache={},o.edgeDataCache={},o.nodesWithForcedLabels=[],o.edgesWithForcedLabels=[],o.nodeExtent={x:[0,1],y:[0,1]},o.matrix=(0,ke.identity)(),o.invMatrix=(0,ke.identity)(),o.correctionRatio=1,o.customBBox=null,o.normalizationFunction=(0,F.createNormalizationFunction)({x:[0,1],y:[0,1]}),o.graphToViewportRatio=1,o.width=0,o.height=0,o.pixelRatio=(0,F.getPixelRatio)(),o.displayedNodeLabels=new Set,o.displayedEdgeLabels=new Set,o.highlightedNodes=new Set,o.hoveredNode=null,o.hoveredEdge=null,o.renderFrame=null,o.renderHighlightedNodesFrame=null,o.needToProcess=!1,o.checkEdgesEventsFrame=null,o.nodePrograms={},o.nodeHoverPrograms={},o.edgePrograms={},o.settings=(0,$e.resolveSettings)(n),(0,$e.validateSettings)(o.settings),(0,F.validateGraph)(e),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");o.graph=e,o.container=r,o.createWebGLContext("edges",{preserveDrawingBuffer:!0}),o.createCanvasContext("edgeLabels"),o.createWebGLContext("nodes"),o.createCanvasContext("labels"),o.createCanvasContext("hovers"),o.createWebGLContext("hoverNodes"),o.createCanvasContext("mouse");for(var a in o.webGLContexts){var s=o.webGLContexts[a];s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.enable(s.BLEND)}for(var d in o.settings.nodeProgramClasses){var u=o.settings.nodeProgramClasses[d];o.nodePrograms[d]=new u(o.webGLContexts.nodes,o);var h=u;d in o.settings.nodeHoverProgramClasses&&(h=o.settings.nodeHoverProgramClasses[d]),o.nodeHoverPrograms[d]=new h(o.webGLContexts.hoverNodes,o)}for(var d in o.settings.edgeProgramClasses){var c=o.settings.edgeProgramClasses[d];o.edgePrograms[d]=new c(o.webGLContexts.edges,o)}return o.resize(),o.camera=new Yt.default,o.bindCameraHandlers(),o.mouseCaptor=new Es.default(o.elements.mouse,o),o.touchCaptor=new Ss.default(o.elements.mouse,o),o.bindEventHandlers(),o.bindGraphHandlers(),o.handleSettingsUpdate(),o.refresh(),o}return t.prototype.createCanvas=function(e){var r=(0,F.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(e)});return this.elements[e]=r,this.container.appendChild(r),r},t.prototype.createCanvasContext=function(e){var r=this.createCanvas(e),n={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[e]=r.getContext("2d",n),this},t.prototype.createWebGLContext=function(e,r){var n=this.createCanvas(e),o=L({preserveDrawingBuffer:!1,antialias:!1},r||{}),a;return a=n.getContext("webgl2",o),a||(a=n.getContext("webgl",o)),a||(a=n.getContext("experimental-webgl",o)),this.webGLContexts[e]=a,this},t.prototype.bindCameraHandlers=function(){var e=this;return this.activeListeners.camera=function(){e.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this},t.prototype.unbindCameraHandlers=function(){return this.camera.removeListener("updated",this.activeListeners.camera),this},t.prototype.mouseIsOnNode=function(e,r,n){var o=e.x,a=e.y,s=r.x,d=r.y;return o>s-n&&o<s+n&&a>d-n&&a<d+n&&Math.sqrt(Math.pow(o-s,2)+Math.pow(a-d,2))<n},t.prototype.getQuadNodes=function(e){var r=this.viewportToFramedGraph(e);return this.quadtree.point(r.x,1-r.y)},t.prototype.getNodeAtPosition=function(e){for(var r=e.x,n=e.y,o=this.getQuadNodes(e),a=1/0,s=null,d=0,u=o.length;d<u;d++){var h=o[d],c=this.nodeDataCache[h],l=this.framedGraphToViewport(c),f=this.scaleSize(c.size);if(!c.hidden&&this.mouseIsOnNode(e,l,f)){var g=Math.sqrt(Math.pow(r-l.x,2)+Math.pow(n-l.y,2));g<a&&(a=g,s=h)}}return s},t.prototype.bindEventHandlers=function(){var e=this;this.activeListeners.handleResize=function(){e.scheduleRender()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(n){var o={event:n,preventSigmaDefault:function(){n.preventSigmaDefault()}},a=e.getNodeAtPosition(n);if(a&&e.hoveredNode!==a&&!e.nodeDataCache[a].hidden){e.hoveredNode&&e.emit("leaveNode",L(L({},o),{node:e.hoveredNode})),e.hoveredNode=a,e.emit("enterNode",L(L({},o),{node:a})),e.scheduleHighlightedNodesRender();return}if(e.hoveredNode){var s=e.nodeDataCache[e.hoveredNode],d=e.framedGraphToViewport(s),u=e.scaleSize(s.size);if(!e.mouseIsOnNode(n,d,u)){var h=e.hoveredNode;e.hoveredNode=null,e.emit("leaveNode",L(L({},o),{node:h})),e.scheduleHighlightedNodesRender();return}}e.settings.enableEdgeHoverEvents===!0?e.checkEdgeHoverEvents(o):e.settings.enableEdgeHoverEvents==="debounce"&&(e.checkEdgesEventsFrame||(e.checkEdgesEventsFrame=(0,F.requestFrame)(function(){e.checkEdgeHoverEvents(o),e.checkEdgesEventsFrame=null})))};var r=function(n){return function(o){var a={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},s=o.original.isFakeSigmaMouseEvent,d=s?e.getNodeAtPosition(o):e.hoveredNode;if(d)return e.emit("".concat(n,"Node"),L(L({},a),{node:d}));if(n==="wheel"?e.settings.enableEdgeWheelEvents:e.settings.enableEdgeClickEvents){var u=e.getEdgeAtPoint(o.x,o.y);if(u)return e.emit("".concat(n,"Edge"),L(L({},a),{edge:u}))}return e.emit("".concat(n,"Stage"),a)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},t.prototype.bindGraphHandlers=function(){var e=this,r=this.graph;return this.activeListeners.graphUpdate=function(){e.scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(n){delete e.nodeDataCache[n.key],e.hoveredNode===n.key&&(e.hoveredNode=null),e.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(n){delete e.edgeDataCache[n.key],e.hoveredEdge===n.key&&(e.hoveredEdge=null),e.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){e.edgeDataCache={},e.hoveredEdge=null,e.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){e.nodeDataCache={},e.hoveredNode=null,e.activeListeners.clearEdgesGraphUpdate()},r.on("nodeAdded",this.activeListeners.graphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.graphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),r.on("edgeAdded",this.activeListeners.graphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.graphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this},t.prototype.unbindGraphHandlers=function(){var e=this.graph;e.removeListener("nodeAdded",this.activeListeners.graphUpdate),e.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),e.removeListener("nodeAttributesUpdated",this.activeListeners.graphUpdate),e.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),e.removeListener("edgeAdded",this.activeListeners.graphUpdate),e.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),e.removeListener("edgeAttributesUpdated",this.activeListeners.graphUpdate),e.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),e.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),e.removeListener("cleared",this.activeListeners.clearGraphUpdate)},t.prototype.checkEdgeHoverEvents=function(e){var r=this.hoveredNode?null:this.getEdgeAtPoint(e.event.x,e.event.y);return r!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",L(L({},e),{edge:this.hoveredEdge})),r&&this.emit("enterEdge",L(L({},e),{edge:r})),this.hoveredEdge=r),this},t.prototype.getEdgeAtPoint=function(e,r){var n,o,a=this,s=this,d=s.edgeDataCache,u=s.nodeDataCache;if(!(0,Qt.isPixelColored)(this.webGLContexts.edges,e*this.pixelRatio,r*this.pixelRatio))return null;var h=this.viewportToGraph({x:e,y:r}),c=h.x,l=h.y,f=0;if(this.graph.someEdge(function(S,T,N,H,O,M){var W=O.x,J=O.y,ce=M.x,ae=M.y;if(d[S].hidden||u[N].hidden||u[H].hidden)return!1;if(W!==ce||J!==ae){var se=Math.sqrt(Math.pow(ce-W,2)+Math.pow(ae-J,2)),Ge=a.graphToViewport({x:W,y:J}),De=Ge.x,si=Ge.y,Lt=a.graphToViewport({x:ce,y:ae}),ui=Lt.x,di=Lt.y,hi=Math.sqrt(Math.pow(ui-De,2)+Math.pow(di-si,2));return f=se/hi,!0}}),!f)return null;var g=this.graph.filterEdges(function(S,T,N,H,O,M){if(d[S].hidden||u[N].hidden||u[H].hidden)return!1;if((0,Qt.doEdgeCollideWithPoint)(c,l,O.x,O.y,M.x,M.y,a.scaleSize(d[S].size*f)))return!0});if(g.length===0)return null;var v=g[g.length-1],y=-1/0;try{for(var _=ws(g),p=_.next();!p.done;p=_.next()){var x=p.value,E=this.graph.getEdgeAttribute(x,"zIndex");E>=y&&(v=x,y=E)}}catch(S){n={error:S}}finally{try{p&&!p.done&&(o=_.return)&&o.call(_)}finally{if(n)throw n.error}}return v},t.prototype.process=function(){var e=this,r=this.graph,n=this.settings,o=this.getDimensions(),a=[1/0,-1/0],s=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(o,n.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,F.graphExtent)(r),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var d=new Yt.default,u=(0,F.matrixFromCamera)(d.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,F.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var h={},c=r.nodes(),l=0,f=c.length;l<f;l++){var g=c[l],v=Object.assign({},r.getNodeAttributes(g));n.nodeReducer&&(v=n.nodeReducer(g,v));var y=As(this.settings,g,v);h[y.type]=(h[y.type]||0)+1,this.nodeDataCache[g]=y,this.normalizationFunction.applyTo(y),y.forceLabel&&this.nodesWithForcedLabels.push(g),this.settings.zIndex&&(y.zIndex<a[0]&&(a[0]=y.zIndex),y.zIndex>a[1]&&(a[1]=y.zIndex))}for(var _ in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(_))throw new Error('Sigma: could not find a suitable program for node type "'.concat(_,'"!'));this.nodePrograms[_].reallocate(h[_]||0),h[_]=0}this.settings.zIndex&&a[0]!==a[1]&&(c=(0,F.zIndexOrdering)(a,function(M){return e.nodeDataCache[M].zIndex},c));for(var p=this.normalizationFunction.ratio,l=0,f=c.length;l<f;l++){var g=c[l],y=this.nodeDataCache[g];this.quadtree.add(g,y.x,1-y.y,this.scaleSize(y.size,1)/p),typeof y.label=="string"&&!y.hidden&&this.labelGrid.add(g,y.size,this.framedGraphToViewport(y,{matrix:u}));var x=this.nodePrograms[y.type];if(!x)throw new Error('Sigma: could not find a suitable program for node type "'.concat(y.type,'"!'));x.process(h[y.type]++,y),y.highlighted&&!y.hidden&&this.highlightedNodes.add(g)}this.labelGrid.organize();for(var E={},S=r.edges(),l=0,f=S.length;l<f;l++){var T=S[l],v=Object.assign({},r.getEdgeAttributes(T));n.edgeReducer&&(v=n.edgeReducer(T,v));var y=Cs(this.settings,T,v);E[y.type]=(E[y.type]||0)+1,this.edgeDataCache[T]=y,y.forceLabel&&!y.hidden&&this.edgesWithForcedLabels.push(T),this.settings.zIndex&&(y.zIndex<s[0]&&(s[0]=y.zIndex),y.zIndex>s[1]&&(s[1]=y.zIndex))}for(var _ in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(_))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(_,'"!'));this.edgePrograms[_].reallocate(E[_]||0),E[_]=0}this.settings.zIndex&&s[0]!==s[1]&&(S=(0,F.zIndexOrdering)(s,function(M){return e.edgeDataCache[M].zIndex},S));for(var l=0,f=S.length;l<f;l++){var T=S[l],y=this.edgeDataCache[T],N=r.extremities(T),H=this.nodeDataCache[N[0]],O=this.nodeDataCache[N[1]];this.edgePrograms[y.type].process(E[y.type]++,H,O,y)}return this},t.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},t.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var e=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(e.ratio,this.settings.labelDensity);(0,bs.default)(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var n=this.canvasContexts.labels,o=0,a=r.length;o<a;o++){var s=r[o],d=this.nodeDataCache[s];if(!this.displayedNodeLabels.has(s)&&!d.hidden){var u=this.framedGraphToViewport(d),h=u.x,c=u.y,l=this.scaleSize(d.size);!d.forceLabel&&l<this.settings.labelRenderedSizeThreshold||h<-Zt||h>this.width+Zt||c<-Jt||c>this.height+Jt||(this.displayedNodeLabels.add(s),this.settings.labelRenderer(n,L(L({key:s},d),{size:l,x:h,y:c}),this.settings))}}return this},t.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var e=this.canvasContexts.edgeLabels;e.clearRect(0,0,this.width,this.height);for(var r=(0,Xt.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),n=new Set,o=0,a=r.length;o<a;o++){var s=r[o],d=this.graph.extremities(s),u=this.nodeDataCache[d[0]],h=this.nodeDataCache[d[1]],c=this.edgeDataCache[s];n.has(s)||c.hidden||u.hidden||h.hidden||(this.settings.edgeLabelRenderer(e,L(L({key:s},c),{size:this.scaleSize(c.size)}),L(L(L({key:d[0]},u),this.framedGraphToViewport(u)),{size:this.scaleSize(u.size)}),L(L(L({key:d[1]},h),this.framedGraphToViewport(h)),{size:this.scaleSize(h.size)}),this.settings),n.add(s))}return this.displayedEdgeLabels=n,this},t.prototype.renderHighlightedNodes=function(){var e=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var n=function(u){var h=e.nodeDataCache[u],c=e.framedGraphToViewport(h),l=c.x,f=c.y,g=e.scaleSize(h.size);e.settings.hoverRenderer(r,L(L({key:u},h),{size:g,x:l,y:f}),e.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(u){u!==e.hoveredNode&&o.push(u)}),o.forEach(function(u){return n(u)});var a={};o.forEach(function(u){var h=e.nodeDataCache[u].type;a[h]=(a[h]||0)+1});for(var s in this.nodeHoverPrograms)this.nodeHoverPrograms[s].reallocate(a[s]||0),a[s]=0;o.forEach(function(u){var h=e.nodeDataCache[u];e.nodeHoverPrograms[h.type].process(a[h.type]++,h)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);for(var s in this.nodeHoverPrograms){var d=this.nodeHoverPrograms[s];d.render({matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio})}},t.prototype.scheduleHighlightedNodesRender=function(){var e=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,F.requestFrame)(function(){e.renderHighlightedNodesFrame=null,e.renderHighlightedNodes(),e.renderEdgeLabels()}))},t.prototype.render=function(){var e=this;this.emit("beforeRender");var r=function(){return e.emit("afterRender"),e};if(this.renderFrame&&((0,F.cancelFrame)(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),!this.graph.order)return r();var n=this.mouseCaptor,o=this.camera.isAnimated()||n.isMoving||n.draggedEvents||n.currentWheelDirection,a=this.camera.getState(),s=this.getDimensions(),d=this.getGraphDimensions(),u=this.getSetting("stagePadding")||0;this.matrix=(0,F.matrixFromCamera)(a,s,d,u),this.invMatrix=(0,F.matrixFromCamera)(a,s,d,u,!0),this.correctionRatio=(0,F.getMatrixImpact)(this.matrix,a,s),this.graphToViewportRatio=this.getGraphToViewportRatio();var h={matrix:this.matrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio};for(var c in this.nodePrograms){var l=this.nodePrograms[c];l.render(h)}if(!this.settings.hideEdgesOnMove||!o)for(var c in this.edgePrograms){var l=this.edgePrograms[c];l.render(h)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()},t.prototype.getCamera=function(){return this.camera},t.prototype.setCamera=function(e){this.unbindCameraHandlers(),this.camera=e,this.bindCameraHandlers()},t.prototype.getContainer=function(){return this.container},t.prototype.getGraph=function(){return this.graph},t.prototype.setGraph=function(e){e!==this.graph&&(this.unbindGraphHandlers(),this.nodeDataCache={},this.edgeDataCache={},this.displayedNodeLabels.clear(),this.displayedEdgeLabels.clear(),this.highlightedNodes.clear(),this.hoveredNode=null,this.hoveredEdge=null,this.nodesWithForcedLabels.length=0,this.edgesWithForcedLabels.length=0,this.checkEdgesEventsFrame!==null&&((0,F.cancelFrame)(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=e,this.bindGraphHandlers(),this.refresh())},t.prototype.getMouseCaptor=function(){return this.mouseCaptor},t.prototype.getTouchCaptor=function(){return this.touchCaptor},t.prototype.getDimensions=function(){return{width:this.width,height:this.height}},t.prototype.getGraphDimensions=function(){var e=this.customBBox||this.nodeExtent;return{width:e.x[1]-e.x[0]||1,height:e.y[1]-e.y[0]||1}},t.prototype.getNodeDisplayData=function(e){var r=this.nodeDataCache[e];return r?Object.assign({},r):void 0},t.prototype.getEdgeDisplayData=function(e){var r=this.edgeDataCache[e];return r?Object.assign({},r):void 0},t.prototype.getNodeDisplayedLabels=function(){return new Set(this.displayedNodeLabels)},t.prototype.getEdgeDisplayedLabels=function(){return new Set(this.displayedEdgeLabels)},t.prototype.getSettings=function(){return L({},this.settings)},t.prototype.getSetting=function(e){return this.settings[e]},t.prototype.setSetting=function(e,r){return this.settings[e]=r,(0,$e.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},t.prototype.updateSetting=function(e,r){return this.settings[e]=r(this.settings[e]),(0,$e.validateSettings)(this.settings),this.handleSettingsUpdate(),this.scheduleRefresh(),this},t.prototype.resize=function(){var e=this.width,r=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,F.getPixelRatio)(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(e===this.width&&r===this.height)return this;this.emit("resize");for(var n in this.elements){var o=this.elements[n];o.style.width=this.width+"px",o.style.height=this.height+"px"}for(var n in this.canvasContexts)this.elements[n].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[n].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[n].scale(this.pixelRatio,this.pixelRatio);for(var n in this.webGLContexts)this.elements[n].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[n].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[n].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},t.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},t.prototype.refresh=function(){return this.needToProcess=!0,this.render(),this},t.prototype.scheduleRender=function(){var e=this;return this.renderFrame||(this.renderFrame=(0,F.requestFrame)(function(){e.render()})),this},t.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this.scheduleRender(),this},t.prototype.getViewportZoomedState=function(e,r){var n=this.camera.getState(),o=n.ratio,a=n.angle,s=n.x,d=n.y,u=r/o,h={x:this.width/2,y:this.height/2},c=this.viewportToFramedGraph(e),l=this.viewportToFramedGraph(h);return{angle:a,x:(c.x-l.x)*(1-u)+s,y:(c.y-l.y)*(1-u)+d,ratio:r}},t.prototype.viewRectangle=function(){var e=0*this.width/8,r=0*this.height/8,n=this.viewportToFramedGraph({x:0-e,y:0-r}),o=this.viewportToFramedGraph({x:this.width+e,y:0-r}),a=this.viewportToFramedGraph({x:0,y:this.height+r});return{x1:n.x,y1:n.y,x2:o.x,y2:o.y,height:o.y-a.y}},t.prototype.framedGraphToViewport=function(e,r){r===void 0&&(r={});var n=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,o=r.matrix?r.matrix:n?(0,F.matrixFromCamera)(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getSetting("stagePadding")||0):this.matrix,a=(0,ke.multiplyVec2)(o,e);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}},t.prototype.viewportToFramedGraph=function(e,r){r===void 0&&(r={});var n=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,o=r.matrix?r.matrix:n?(0,F.matrixFromCamera)(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,a=(0,ke.multiplyVec2)(o,{x:e.x/this.width*2-1,y:1-e.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a},t.prototype.viewportToGraph=function(e,r){return r===void 0&&(r={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(e,r))},t.prototype.graphToViewport=function(e,r){return r===void 0&&(r={}),this.framedGraphToViewport(this.normalizationFunction(e),r)},t.prototype.getGraphToViewportRatio=function(){var e={x:0,y:0},r={x:1,y:1},n=Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)),o=this.graphToViewport(e),a=this.graphToViewport(r),s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2));return s/n},t.prototype.getBBox=function(){return(0,F.graphExtent)(this.graph)},t.prototype.getCustomBBox=function(){return this.customBBox},t.prototype.setCustomBBox=function(e){return this.customBBox=e,this.scheduleRender(),this},t.prototype.kill=function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.quadtree=new Kt.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,F.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,F.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},t.prototype.scaleSize=function(e,r){return e===void 0&&(e=1),r===void 0&&(r=this.camera.ratio),e/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)},t.prototype.getCanvases=function(){return L({},this.elements)},t}(xs.TypedEventEmitter);gt.default=Ls;var Ke=w&&w.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(te,"__esModule",{value:!0});te.Sigma=te.MouseCaptor=te.QuadTree=te.Camera=void 0;var ri=Ke(gt);te.Sigma=ri.default;var Ts=Ke(He);te.Camera=Ts.default;var Rs=Ke(Q);te.QuadTree=Rs.default;var Gs=Ke(Ve);te.MouseCaptor=Gs.default;var Ds=te.default=ri.default;function Ns(i){return!i||typeof i!="object"||typeof i=="function"||Array.isArray(i)||i instanceof Set||i instanceof Map||i instanceof RegExp||i instanceof Date}function ii(i,t){i=i||{};var e={};for(var r in t){var n=i[r],o=t[r];if(!Ns(o)){e[r]=ii(n,o);continue}n===void 0?e[r]=o:e[r]=n}return e}var Fs=ii,Xe={};function Os(i){return typeof i!="number"||isNaN(i)?1:i}function Ms(i,t){var e={},r=function(a){return typeof a>"u"?t:a};typeof t=="function"&&(r=t);var n=function(a){return r(a[i])},o=function(){return r(void 0)};return typeof i=="string"?(e.fromAttributes=n,e.fromGraph=function(a,s){return n(a.getNodeAttributes(s))},e.fromEntry=function(a,s){return n(s)}):typeof i=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},e.fromGraph=function(a,s){return r(i(s,a.getNodeAttributes(s)))},e.fromEntry=function(a,s){return r(i(a,s))}):(e.fromAttributes=o,e.fromGraph=o,e.fromEntry=o),e}function ni(i,t){var e={},r=function(a){return typeof a>"u"?t:a};typeof t=="function"&&(r=t);var n=function(a){return r(a[i])},o=function(){return r(void 0)};return typeof i=="string"?(e.fromAttributes=n,e.fromGraph=function(a,s){return n(a.getEdgeAttributes(s))},e.fromEntry=function(a,s){return n(s)},e.fromPartialEntry=e.fromEntry,e.fromMinimalEntry=e.fromEntry):typeof i=="function"?(e.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},e.fromGraph=function(a,s){var d=a.extremities(s);return r(i(s,a.getEdgeAttributes(s),d[0],d[1],a.getNodeAttributes(d[0]),a.getNodeAttributes(d[1]),a.isUndirected(s)))},e.fromEntry=function(a,s,d,u,h,c,l){return r(i(a,s,d,u,h,c,l))},e.fromPartialEntry=function(a,s,d,u){return r(i(a,s,d,u))},e.fromMinimalEntry=function(a,s){return r(i(a,s))}):(e.fromAttributes=o,e.fromGraph=o,e.fromEntry=o,e.fromMinimalEntry=o),e}Xe.createNodeValueGetter=Ms;Xe.createEdgeValueGetter=ni;Xe.createEdgeWeightGetter=function(i){return ni(i,Os)};const{createNodeValueGetter:er,createEdgeValueGetter:Ps}=Xe;function tr(i,t){return i<t?i+"§"+t:t+"§"+i}var $s=function(t,e,r){const{nodeXAttribute:n,nodeYAttribute:o}=r,{attraction:a,repulsion:s,gravity:d,inertia:u,maxMove:h}=r.settings;let{shouldSkipNode:c,shouldSkipEdge:l,isNodeFixed:f}=r;f=er(f),c=er(l,!1),l=Ps(l,!1);const g=t.filterNodes((p,x)=>!c.fromEntry(p,x)),v=g.length;for(let p=0;p<v;p++){const x=g[p],E=t.getNodeAttributes(x),S=e[x];S?e[x]={dx:S.dx*u,dy:S.dy*u,x:E[n]||0,y:E[o]||0}:e[x]={dx:0,dy:0,x:E[n]||0,y:E[o]||0}}const y={};if(s)for(let p=0;p<v;p++){const x=g[p],E=e[x];for(let S=p+1;S<v;S++){const T=g[S],N=e[T],H=N.x-E.x,O=N.y-E.y,M=Math.sqrt(H*H+O*O)||1;y[tr(x,T)]=M;const W=s/M*H,J=s/M*O;E.dx-=W,E.dy-=J,N.dx+=W,N.dy+=J}}if(a&&t.forEachEdge((p,x,E,S,T,N,H)=>{if(E===S||c.fromEntry(E,T)||c.fromEntry(S,N)||l.fromEntry(p,x,E,S,T,N,H))return;const O=e[E],M=e[S],W=M.x-O.x,J=M.y-O.y,ce=y[tr(E,S)],ae=a*ce*W,se=a*ce*J;O.dx+=ae,O.dy+=se,M.dx-=ae,M.dy-=se}),d)for(let p=0;p<v;p++){const x=g[p],E=e[x],{x:S,y:T}=E,N=Math.sqrt(S*S+T*T)||1;e[x].dx-=S*d*N,e[x].dy-=T*d*N}const _=!1;for(let p=0;p<v;p++){const x=g[p],E=e[x],S=Math.sqrt(E.dx*E.dx+E.dy*E.dy);S>h&&(E.dx*=h/S,E.dy*=h/S),f.fromGraph(t,x)?E.fixed=!0:(E.x+=E.dx,E.y+=E.dy,E.fixed=!1)}return{converged:_}},Ct={};Ct.assignLayoutChanges=function(i,t,e){const{nodeXAttribute:r,nodeYAttribute:n}=e;i.updateEachNodeAttributes((o,a)=>{const s=t[o];return!s||s.fixed||(a[r]=s.x,a[n]=s.y),a},{attributes:["x","y"]})};Ct.collectLayoutChanges=function(i){const t={};for(const e in i){const r=i[e];t[e]={x:r.x,y:r.y}}return t};var ks={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}};const Is=Lr,zs=Fs,Us=$s,js=Ct,Bs=ks;function Ae(i,t){if(!Is(i))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");t=zs(t,Bs),this.callbacks={},t.onConverged&&(this.callbacks.onConverged=t.onConverged),this.graph=i,this.params=t,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}Ae.prototype.isRunning=function(){return this.running};Ae.prototype.runFrame=function(){let{converged:i}=Us(this.graph,this.nodeStates,this.params);js.assignLayoutChanges(this.graph,this.nodeStates,this.params),i=!1,i?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())};Ae.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this};Ae.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())};Ae.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0};var Hs=Ae;const Ws=je(Hs),Vs=[{key:"0.0/aaa",attributes:{size:22,x:1,y:2,label:"0.0"}},{key:"1.0",attributes:{size:15,x:2,y:3,label:"1.0"}},{key:"2.0",attributes:{size:16,x:1,y:4,label:"2.0",color:"#BB100A"}},{key:"3.0",attributes:{size:16,x:2,y:1,label:"3.0",color:"#BB100A"}}],qs=[{key:"0",source:"1.0",target:"0.0/aaa",attributes:{size:8}},{key:"1",source:"2.0",target:"0.0/aaa",attributes:{size:8}},{key:"3",source:"2.0",target:"3.0",attributes:{size:8}},{key:"4",source:"1.0",target:"2.0",attributes:{size:8,type:"arrow"}}],Ys={nodes:Vs,edges:qs},Ks=document.getElementById("sigma-container"),ie=new G;ie.import(Ys);const Xs=new Ws(ie,{isNodeFixed:(i,t)=>t.highlighted});Xs.start();const Z=new Ds(ie,Ks);let _e=null,oi=!1;Z.on("enterNode",({node:i})=>{ai(i)});Z.on("leaveNode",()=>{ai(void 0)});Z.getMouseCaptor().on("mousemovebody",i=>{if(!oi||!_e)return;const t=Z.viewportToGraph(i);ie.setNodeAttribute(_e,"x",t.x),ie.setNodeAttribute(_e,"y",t.y),i.preventSigmaDefault(),i.original.preventDefault(),i.original.stopPropagation()});Z.getMouseCaptor().on("mouseup",()=>{_e&&ie.removeNodeAttribute(_e,"highlighted"),oi=!1,_e=null});Z.getMouseCaptor().on("mousedown",()=>{Z.getCustomBBox()||Z.setCustomBBox(Z.getBBox())});function ai(i){i?(ue.hoveredNode=i,ue.hoveredNeighbors=new Set(ie.neighbors(i))):(ue.hoveredNode=void 0,ue.hoveredNeighbors=void 0),Z.refresh()}const ue={searchQuery:""};Z.setSetting("edgeReducer",(i,t)=>{const e={...t};return ue.hoveredNode&&!ie.hasExtremity(i,ue.hoveredNode)&&(e.hidden=!0),ue.suggestions&&(!ue.suggestions.has(ie.source(i))||!ue.suggestions.has(ie.target(i)))&&(e.hidden=!0),e});
